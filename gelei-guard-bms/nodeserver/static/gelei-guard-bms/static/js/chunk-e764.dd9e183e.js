(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e764"],{"17DJ":function(e,t,a){},"1gIL":function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return c});var r=a("14Xm"),n=a.n(r),l=a("D3Ub"),s=a.n(l),o=a("S583"),i=function(){var e=s()(n.a.mark(function e(){var t,a,r,l,s,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.L)();case 2:return t=e.sent,e.next=5,Object(o.K)();case 5:return a=e.sent,e.next=8,Object(o.J)();case 8:return r=e.sent,l=t.data.map(function(e){return{label:e.name,value:e.value}}),s=a.data.map(function(e){return{label:e.name,value:e.value}}),i=r.data.map(function(e){return{label:e.name,value:e.value}}),e.abrupt("return",{order_source:l,order_status_list:s,pay_type_mode:i});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),c=function(){var e=s()(n.a.mark(function e(){var t,a,r,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)();case 2:return t=e.sent,e.next=5,Object(o.v)();case 5:return a=e.sent,r=t.data.map(function(e){return{label:e.name,value:e.value}}),l=a.data.map(function(e){return{label:e.name,value:e.value}}),e.abrupt("return",{advertising_type:r,advertising_point:l});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},"6u+r":function(e,t,a){"use strict";a.r(t);var r=a("QbLZ"),n=a.n(r),l=a("GQeE"),s=a.n(l),o=a("FyfS"),i=a.n(o),c=a("gDS+"),u=a.n(c),_=a("YP4+"),d=a("Wgwc"),p=a.n(d),g=a("S583"),b=a("z0WU"),m=a("1gIL"),v={components:{},data:function(){var e=p()();return{query_sets:{order_no:"",order_time_range:[p()().subtract(1,"month"),e],order_type:"",order_status:"",pay_type:"",nick_name:"",contact_phone:""},order_source:_.e,order_status_list:_.o,pay_type_mode:_.y,order_data:[],download_loading:!1,page:1,page_size:_.k,total:0}},computed:{},mounted:function(){this.init()},methods:{get_order_status_style:function(e){return"交易成功"===e?"#55ff5b":"待支付"===e?"#ff0000":"已支付"===e?"#55ff5b":"已超时"===e?"#55965b":"已退款"===e?"#55965b":"交易取消"===e?"#55965b":""},init:function(){var e=this;this.fetch_order_list(),Object(m.b)().then(function(t){e.order_source=t.order_source,e.order_status_list=t.order_status_list,e.pay_type_mode=t.pay_type_mode})},get_condition:function(){var e=JSON.parse(u()(this.query_sets)),t=e.order_time_range;delete e.order_time_range;var a={};t&&(a={begin_time:new Date(t[0]).getTime(),end_time:new Date(t[1]).getTime()});var r=!0,n=!1,l=void 0;try{for(var o,c=i()(s()(e));!(r=(o=c.next()).done);r=!0){var _=o.value;e[_]&&(a[_]=e[_])}}catch(e){n=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(n)throw l}}return a},get_condition_with_pagination:function(){var e=this.get_condition();return e.page_no=this.page,e.page_num=this.page_size,e},table_size_change:function(e){this.page_size=e,this.query()},change_current:function(e){this.page=e,this.query()},order_list_map:function(e){return e.map(function(e){var t=Object(b.b)(e.order_time,_.i),a=Object(b.c)(e.order_amount);return n()({},e,{order_amount_label:a,order_time_label:t})})},query_condition_change:function(){this.page=1,this.page_size=_.k,this.query()},query:function(){this.fetch_order_list()},fetch_order_list:function(){var e=this,t=this.get_condition_with_pagination();Object(g.I)(t).then(function(t){0===t.status&&(e.order_data=e.order_list_map(t.data),e.total=t.total_count)})},download:function(){var e=this;this.download_loading=!0;var t=this.get_condition(),r=n()({},t,{page_no:1,page_num:this.total}),l=Object(b.b)(t.begin_time),s=Object(b.b)(t.end_time),o=void 0;o=l===s?[_.n,l].join("_"):[_.n,l,s].join("_"),Object(g.I)(r).then(function(t){var r=e.order_list_map(t.data);Promise.all([a.e("chunk-0274"),a.e("chunk-77e8")]).then(a.bind(null,"hTCZ")).then(function(t){var a={header:["订单号","交易单号","交易时间","用户名","订单详情","交易金额","支付方式","订单状态","用户联系方式"],data:e.formatJson(["order_no","pay_order_no","order_time_label","nick_name","order_type","order_amount_label","pay_type","order_status","contact_phone"],r),filename:o,autoWidth:!0,bookType:"xlsx"};t.export_json_to_excel(a),e.download_loading=!1})}).finally(function(){e.download_loading=!1})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})}}},h=(a("a4Bm"),a("KHd+")),y=Object(h.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content-body"},[a("div",{staticClass:"search-area"},[a("el-row",{staticClass:"row-bg",attrs:{gutter:10}},[a("el-col",{staticClass:"col-bg",attrs:{xs:8,sm:6,md:4,lg:3,xl:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{xl:8}},[e._v("订单号:")]),e._v(" "),a("el-col",{attrs:{xl:16}},[a("el-input",{attrs:{size:"mini",placeholder:"订单号",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.order_no,callback:function(t){e.$set(e.query_sets,"order_no",t)},expression:"query_sets.order_no"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:4,sm:6,md:8,lg:9,xl:6}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{xl:4}},[e._v("交易时间:")]),e._v(" "),a("el-col",{attrs:{xl:16}},[a("el-date-picker",{attrs:{type:"daterange",size:"mini","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.query_condition_change},model:{value:e.query_sets.order_time_range,callback:function(t){e.$set(e.query_sets,"order_time_range",t)},expression:"query_sets.order_time_range"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:4,sm:6,md:8,lg:9,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{xl:8}},[e._v("订单详情:")]),e._v(" "),a("el-col",{attrs:{xl:16}},[a("el-select",{attrs:{size:"mini",placeholder:"订单详情",clearable:""},model:{value:e.query_sets.order_type,callback:function(t){e.$set(e.query_sets,"order_type",t)},expression:"query_sets.order_type"}},e._l(e.order_source,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value},on:{change:e.query_condition_change}})}))],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:4,sm:6,md:8,lg:9,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{xl:8}},[e._v("订单状态:")]),e._v(" "),a("el-col",{attrs:{xl:16}},[a("el-select",{attrs:{size:"mini",placeholder:"订单状态",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.order_status,callback:function(t){e.$set(e.query_sets,"order_status",t)},expression:"query_sets.order_status"}},e._l(e.order_status_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:4,sm:6,md:8,lg:9,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{xl:8}},[e._v("交易方式:")]),e._v(" "),a("el-col",{attrs:{xl:16}},[a("el-select",{attrs:{size:"mini",placeholder:"交易方式",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.pay_type,callback:function(t){e.$set(e.query_sets,"pay_type",t)},expression:"query_sets.pay_type"}},e._l(e.pay_type_mode,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:4,sm:6,md:8,lg:9,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{xl:8}},[e._v("用户名:")]),e._v(" "),a("el-col",{attrs:{xl:16}},[a("el-input",{attrs:{size:"mini",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.nick_name,callback:function(t){e.$set(e.query_sets,"nick_name",t)},expression:"query_sets.nick_name"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg layout-right",attrs:{xs:4,sm:6,md:8,lg:9,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{xl:10}},[e._v("用户联系方式:")]),e._v(" "),a("el-col",{attrs:{xl:14}},[a("el-input",{attrs:{size:"mini",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.contact_phone,callback:function(t){e.$set(e.query_sets,"contact_phone",t)},expression:"query_sets.contact_phone"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg layout-right col-right-button",attrs:{xs:4,sm:6,md:8,lg:9,xl:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-button",{attrs:{loading:e.download_loading,size:"mini",type:"success"},on:{click:e.download}},[a("i",{staticClass:"el-icon-download el-icon"}),e._v("导出\n              ")])],1)],1)])],1)],1),e._v(" "),a("div",{staticClass:"between-search-area-and-table-display"}),e._v(" "),a("div",{staticClass:"table-content table-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.order_data,size:"mini"}},[a("el-table-column",{attrs:{align:"center",label:"订单号",prop:"order_no",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"交易单号",prop:"pay_order_no",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"交易时间",prop:"order_time_label",width:"132"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户名",prop:"nick_name"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单详情",prop:"order_type"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"交易金额",prop:"order_amount_label"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"支付方式",prop:"pay_type"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单状态",prop:"order_status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:e.get_order_status_style(t.row.order_status)}},[e._v(e._s(t.row.order_status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户联系方式",prop:"contact_phone"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.page,"page-size":e.page_size,"page-sizes":[10,20,50,100],total:e.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":e.change_current,"size-change":e.table_size_change}})],1)])])},[],!1,null,"052a8b11",null);y.options.__file="order_list.vue";t.default=y.exports},a4Bm:function(e,t,a){"use strict";var r=a("17DJ");a.n(r).a}}]);