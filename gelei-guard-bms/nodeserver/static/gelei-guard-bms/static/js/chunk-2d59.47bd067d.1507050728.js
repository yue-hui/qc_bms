(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d59"],{"9KaR":function(e,t,r){"use strict";var n=r("vC++");r.n(n).a},FeQ0:function(e,t,r){},S583:function(e,t,r){"use strict";r.d(t,"yb",function(){return a}),r.d(t,"xb",function(){return i}),r.d(t,"wb",function(){return o}),r.d(t,"P",function(){return u}),r.d(t,"O",function(){return s}),r.d(t,"hb",function(){return c}),r.d(t,"gb",function(){return l}),r.d(t,"Zb",function(){return d}),r.d(t,"Ab",function(){return g}),r.d(t,"Bb",function(){return m}),r.d(t,"zb",function(){return p}),r.d(t,"bc",function(){return f}),r.d(t,"ub",function(){return _}),r.d(t,"gc",function(){return b}),r.d(t,"Z",function(){return h}),r.d(t,"cb",function(){return v}),r.d(t,"Xb",function(){return j}),r.d(t,"Y",function(){return O}),r.d(t,"ab",function(){return y}),r.d(t,"Cb",function(){return w}),r.d(t,"Eb",function(){return x}),r.d(t,"g",function(){return k}),r.d(t,"ic",function(){return C}),r.d(t,"Db",function(){return F}),r.d(t,"r",function(){return z}),r.d(t,"Wb",function(){return $}),r.d(t,"Vb",function(){return q}),r.d(t,"Ub",function(){return S}),r.d(t,"Rb",function(){return A}),r.d(t,"Tb",function(){return B}),r.d(t,"Sb",function(){return L}),r.d(t,"Qb",function(){return R}),r.d(t,"Yb",function(){return U}),r.d(t,"V",function(){return M}),r.d(t,"U",function(){return Q}),r.d(t,"mb",function(){return P}),r.d(t,"l",function(){return V}),r.d(t,"H",function(){return E}),r.d(t,"M",function(){return I}),r.d(t,"ec",function(){return K}),r.d(t,"Ib",function(){return H}),r.d(t,"k",function(){return J}),r.d(t,"L",function(){return Y}),r.d(t,"Jb",function(){return N}),r.d(t,"G",function(){return T}),r.d(t,"v",function(){return W}),r.d(t,"u",function(){return X}),r.d(t,"T",function(){return Z}),r.d(t,"b",function(){return D}),r.d(t,"t",function(){return G}),r.d(t,"fc",function(){return ee}),r.d(t,"z",function(){return te}),r.d(t,"S",function(){return re}),r.d(t,"vb",function(){return ne}),r.d(t,"rb",function(){return ae}),r.d(t,"sb",function(){return ie}),r.d(t,"Q",function(){return oe}),r.d(t,"o",function(){return ue}),r.d(t,"e",function(){return se}),r.d(t,"hc",function(){return ce}),r.d(t,"pb",function(){return le}),r.d(t,"ob",function(){return de}),r.d(t,"qb",function(){return ge}),r.d(t,"d",function(){return me}),r.d(t,"D",function(){return pe}),r.d(t,"N",function(){return fe}),r.d(t,"a",function(){return _e}),r.d(t,"y",function(){return be}),r.d(t,"n",function(){return he}),r.d(t,"ac",function(){return ve}),r.d(t,"Gb",function(){return je}),r.d(t,"j",function(){return Oe}),r.d(t,"F",function(){return ye}),r.d(t,"K",function(){return we}),r.d(t,"Fb",function(){return xe}),r.d(t,"cc",function(){return ke}),r.d(t,"Lb",function(){return Ce}),r.d(t,"Kb",function(){return Fe}),r.d(t,"Mb",function(){return ze}),r.d(t,"m",function(){return $e}),r.d(t,"I",function(){return qe}),r.d(t,"s",function(){return Se}),r.d(t,"fb",function(){return Ae}),r.d(t,"eb",function(){return Be}),r.d(t,"c",function(){return Le}),r.d(t,"B",function(){return Re}),r.d(t,"q",function(){return Ue}),r.d(t,"jb",function(){return Me}),r.d(t,"ib",function(){return Qe}),r.d(t,"C",function(){return Pe}),r.d(t,"A",function(){return Ve}),r.d(t,"W",function(){return Ee}),r.d(t,"X",function(){return Ie}),r.d(t,"kb",function(){return Ke}),r.d(t,"nb",function(){return He}),r.d(t,"lb",function(){return Je}),r.d(t,"x",function(){return Ye}),r.d(t,"Hb",function(){return Ne}),r.d(t,"tb",function(){return Te}),r.d(t,"f",function(){return We}),r.d(t,"E",function(){return Xe}),r.d(t,"p",function(){return Ze}),r.d(t,"Pb",function(){return De}),r.d(t,"i",function(){return Ge}),r.d(t,"J",function(){return et}),r.d(t,"dc",function(){return tt}),r.d(t,"Ob",function(){return rt}),r.d(t,"R",function(){return nt}),r.d(t,"Nb",function(){return at}),r.d(t,"h",function(){return it}),r.d(t,"w",function(){return ot}),r.d(t,"db",function(){return ut}),r.d(t,"bb",function(){return st});var n=r("t3Un");function a(){return Object(n.a)({url:"/greenguard/common/order/type/list",method:"post"})}function i(){return Object(n.a)({url:"/greenguard/common/order/status/list",method:"post"})}function o(){return Object(n.a)({url:"/greenguard/common/order/paytype/list",method:"post"})}function u(){return Object(n.a)({url:"/greenguard/common/advertising/type/list",method:"post"})}function s(){return Object(n.a)({url:"/greenguard/common/advertising/point/list",method:"post"})}function c(){return Object(n.a)({url:"/greenguard/manager/index/summary",method:"post"})}function l(e){return Object(n.a)({url:"/greenguard/manager/index/list",method:"post",data:e})}function d(e){return Object(n.a)({url:"/greenguard/common/user/reg_from/list",method:"post",data:e})}function g(e){return Object(n.a)({url:"/greenguard/manager/user/patriarch/list",method:"post",data:e})}function m(e){return Object(n.a)({url:"/greenguard/manager/user/patriarch/list/export",method:"post",data:e})}function p(e){return Object(n.a)({url:"/greenguard/manager/user/patriarch/detail",method:"post",data:e})}function f(e){return Object(n.a)({url:"/greenguard/manager/member/monthlyplan/unsubscribe/ctccsp",method:"post",data:e})}function _(e){return Object(n.a)({url:"/greenguard/manager/member/monthlyplan/unsubscribe/list",method:"post",data:e})}function b(e){return Object(n.a)({url:"/greenguard/manager/device/unbind",method:"post",data:e})}function h(e){return Object(n.a)({url:"/greenguard/manager/user/patriarch/child_device/record/list",method:"post",data:e})}function v(e){return Object(n.a)({url:"/greenguard/manager/device/info/list",method:"post",data:e})}function j(e){return Object(n.a)({url:"/greenguard/manager/user/child/list",method:"post",data:e})}function O(e){return Object(n.a)({url:"/greenguard/manager/user/child/list/export",method:"post",data:e})}function y(e){return Object(n.a)({url:"/greenguard/manager/device/getAppUsage",method:"post",data:e})}function w(e){return Object(n.a)({url:"/greenguard/manager/qa/type/list",method:"post",data:e})}function x(e){return Object(n.a)({url:"/greenguard/manager/qa/list",method:"post",data:e})}function k(e){return Object(n.a)({url:"/greenguard/manager/qa/add",method:"post",data:e})}function C(e){return Object(n.a)({url:"/greenguard/manager/qa/edit",method:"post",data:e})}function F(e){return Object(n.a)({url:"/greenguard/manager/qa/detail",method:"post",data:e})}function z(e){return Object(n.a)({url:"/greenguard/manager/qa/delete",method:"post",data:e})}function $(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/summary",method:"post",data:e})}function q(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/list",method:"post",data:e})}function S(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/child/summary",method:"post",data:e})}function A(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/child/increased",method:"post",data:e})}function B(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/child/increased/bind_user",method:"post",data:e})}function L(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/child/increased/bind_device",method:"post",data:e})}function R(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/child/list",method:"post",data:e})}function U(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/increased",method:"post",data:e})}function M(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/increased/bind_user",method:"post",data:e})}function Q(e){return Object(n.a)({url:"/greenguard/manager/user/analyze/increased/bind_device",method:"post",data:e})}function P(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/list",method:"post",data:e})}function V(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/add",method:"post",data:e})}function E(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/edit",method:"post",data:e})}function I(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/delete",method:"post",data:e})}function K(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/mark/search",method:"post",data:e})}function H(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/group/list",method:"post",data:e})}function J(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/group/add",method:"post",data:e})}function Y(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/group/delete",method:"post",data:e})}function N(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/group/detail",method:"post",data:e})}function T(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/group/edit",method:"post",data:e})}function W(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/group/publish",method:"post",data:e})}function X(e){return Object(n.a)({url:"/greenguard/manager/qa/publish",method:"post",data:e})}function Z(e){return Object(n.a)({url:"/greenguard/manager/app/version/list",method:"post",data:e})}function D(e){return Object(n.a)({url:"/greenguard/manager/app/version/add",method:"post",data:e})}function G(e){return Object(n.a)({url:"/greenguard/manager/app/version/startup",method:"post",data:e})}function ee(e){return Object(n.a)({url:"/greenguard/manager/app/version/send/command",method:"post",data:e})}function te(e){return Object(n.a)({url:"/greenguard/manager/app/version/update",method:"post",data:e})}function re(e){return Object(n.a)({url:"/greenguard/manager/app/version/get",method:"post",data:e})}function ne(e){return Object(n.a)({url:"/greenguard/manager/order/list",method:"post",data:e})}function ae(e){return Object(n.a)({url:"/greenguard/manager/member/plan/flow/list",method:"post",data:e})}function ie(e){return Object(n.a)({url:"/greenguard/manager/member/plan/list",method:"post",data:e})}function oe(e){return Object(n.a)({url:"/greenguard/manager/member/plan/list/all",method:"post",data:e})}function ue(e){return Object(n.a)({url:"/greenguard/manager/member/plan/delete",method:"post",data:e})}function se(e){return Object(n.a)({url:"/greenguard/manager/member/plan/add",method:"post",data:e})}function ce(e){return Object(n.a)({url:"/greenguard/manager/member/plan/edit",method:"post",data:e})}function le(e){return Object(n.a)({url:"/greenguard/manager/member/activity/list",method:"post",data:e})}function de(e){return Object(n.a)({url:"/greenguard/manager/member/activity/info",method:"post",data:e})}function ge(e){return Object(n.a)({url:"/greenguard/manager/member/activity/user/list",method:"post",data:e})}function me(e){return Object(n.a)({url:"/greenguard/manager/member/activity/add",method:"post",data:e})}function pe(e){return Object(n.a)({url:"/greenguard/manager/member/activity/edit",method:"post",data:e})}function fe(e){return Object(n.a)({url:"/greenguard/manager/advertising/list",method:"post",data:e})}function _e(e){return Object(n.a)({url:"/greenguard/manager/advertising/add",method:"post",data:e})}function be(e){return Object(n.a)({url:"/greenguard/manager/advertising/edit",method:"post",data:e})}function he(e){return Object(n.a)({url:"/greenguard/manager/advertising/delete",method:"post",data:e})}function ve(e){return Object(n.a)({url:"/greenguard/manager/app/version/distribution",method:"post",data:e})}function je(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/subject/list",method:"post",data:e})}function Oe(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/subject/add",method:"post",data:e})}function ye(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/subject/edit",method:"post",data:e})}function we(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/subject/delete",method:"post",data:e})}function xe(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/subject/detail",method:"post",data:e})}function ke(e){return Object(n.a)({url:"/greenguard/manager/soft/recommend/subject/publish",method:"post",data:e})}function Ce(e){return Object(n.a)({url:"/greenguard/manager/sys/param/list",method:"post",data:e})}function Fe(e){return Object(n.a)({url:"/greenguard/manager/sys/param/get",method:"post",data:e})}function ze(e){return Object(n.a)({url:"/greenguard/manager/sys/param/get/type/list",method:"post",data:e})}function $e(e){return Object(n.a)({url:"/greenguard/manager/sys/param/add",method:"post",data:e})}function qe(e){return Object(n.a)({url:"/greenguard/manager/sys/param/edit",method:"post",data:e})}function Se(e){return Object(n.a)({url:"/greenguard/manager/sys/param/delete",method:"post",data:e})}function Ae(e){return Object(n.a)({url:"/greenguard/manager/risk/soft/list",method:"post",data:e})}function Be(e){return Object(n.a)({url:"/greenguard/manager/risk/soft/get",method:"post",data:e})}function Le(e){return Object(n.a)({url:"/greenguard/manager/risk/soft/add",method:"post",data:e})}function Re(e){return Object(n.a)({url:"/greenguard/manager/risk/soft/edit",method:"post",data:e})}function Ue(e){return Object(n.a)({url:"/greenguard/manager/risk/soft/delete",method:"post",data:e})}function Me(e){return Object(n.a)({url:"/greenguard/manager/user/invite/register/statistics/list",method:"post",data:e})}function Qe(){return Object(n.a)({url:"/greenguard/manager/user/invite/register/activity/info",method:"post"})}function Pe(e){return Object(n.a)({url:"/greenguard/manager/user/invite/register/activity/edit",method:"post",data:e})}function Ve(e){return Object(n.a)({url:"/greenguard/manager/channel/saveOrUpdate",method:"post",data:e})}function Ee(e){return Object(n.a)({url:"/greenguard/manager/channel/info",method:"post",data:e})}function Ie(e){return Object(n.a)({url:"/greenguard/manager/channel/list",method:"post",data:e})}function Ke(e){return Object(n.a)({url:"/greenguard/manager/channel/associated/user",method:"post",data:e})}function He(e){return Object(n.a)({url:"/greenguard/manager/voice/query/record",method:"post",data:e})}function Je(e){return Object(n.a)({url:"/greenguard/manager/sms/query/record",method:"post",data:e})}function Ye(e){return Object(n.a)({url:"/greenguard/manager/user/profile/unbind",method:"post",data:e})}function Ne(e){return Object(n.a)({url:"/greenguard/manager/index/querySoftByBundleId",method:"post",data:e})}function Te(e){return Object(n.a)({url:"/greenguard/manager/miniprogram/list",method:"post",data:e})}function We(e){return Object(n.a)({url:"/greenguard/manager/miniprogram/add",method:"post",data:e})}function Xe(e){return Object(n.a)({url:"/greenguard/manager/miniprogram/edit",method:"post",data:e})}function Ze(e){return Object(n.a)({url:"/greenguard/manager/miniprogram/del",method:"post",data:e})}function De(e){return Object(n.a)({url:"/greenguard/manager/user/list",method:"post",data:e})}function Ge(e){return Object(n.a)({url:"/greenguard/manager/user/saveOrUpdate",method:"post",data:e})}function et(e){return Object(n.a)({url:"/greenguard/manager/user/updateState",method:"post",data:e})}function tt(e){return Object(n.a)({url:"/greenguard/manager/user/password/reset",method:"post",data:e})}function rt(e){return Object(n.a)({url:"/greenguard/manager/sysRole/list",method:"post",data:e})}function nt(e){return Object(n.a)({url:"/greenguard/manager/sysRole/list/all",method:"post",data:e})}function at(e){return Object(n.a)({url:"/ns-permission/roles/greenguard/manager/sysRole/info",method:"post",data:e})}function it(e){return Object(n.a)({url:"/ns-permission/roles/greenguard/manager/sysRole/saveOrUpdate",method:"post",data:e})}function ot(e){return Object(n.a)({url:"/greenguard/manager/device/addMobileLog",method:"post",data:e})}function ut(e){return Object(n.a)({url:"/greenguard/manager/device/findMobileLog",method:"post",data:e})}function st(e){return Object(n.a)({url:"/greenguard/manager/device/findAliLog",method:"post",data:e})}},jIVw:function(e,t,r){"use strict";var n=r("FeQ0");r.n(n).a},jfPp:function(e,t,r){},l0i1:function(e,t,r){"use strict";var n=r("jfPp");r.n(n).a},"vC++":function(e,t,r){},wMeV:function(e,t,r){"use strict";r.r(t);var n=r("QbLZ"),a=r.n(n),i=r("YP4+"),o=r("P2sY"),u=r.n(o),s=r("S583"),c=r("z0WU"),l=r("X4fA"),d={name:"ApplicationList",props:{condition:{type:Object,default:function(){return{stars_color:i.M}}}},data:function(){return{loading:!1,data_list:[],page:1,page_size:Object(l.a)(),page_sizes:i.V,total:0,install_count_asc:""}},computed:{},watch:{},mounted:function(){this.fetch()},methods:{install_sort_change:function(e){var t=e.order;this.install_count_asc="descending"!==t&&("ascending"===t||""),this.fetch()},table_size_change:function(e){Object(l.d)(e),this.reload()},change_current:function(e){this.page=e,this.fetch()},edit_application:function(e){var t={type:"edit",params:a()({},e)};this.$emit("reflex",t)},delete_application:function(e){var t=this;this.$confirm("确认删除？").then(function(r){var n={type:"delete",params:{record_id:e.record_id}};t.$emit("reflex",n)}).catch(function(e){})},get_options:function(){var e={};return u()(e,this.condition),e.install_count_asc=this.install_count_asc,e.page_no=this.page,e.page_num=this.page_size,e},grade_label_list:function(e){return e.map(function(e){return Object(c.g)(e)})},subject_label_list:function(e){return e.map(function(e){return Object(c.m)(e)})},fetch:function(){var e=this,t=this.get_options();this.loading=!0,Object(s.mb)(t).then(function(t){e.data_list=t.data.map(function(t){var r=t.start_age!==t.end_age?[t.start_age,"-",t.end_age,"岁"].join(""):[t.start_age,"岁"].join(""),n=Object(c.b)(t.create_time);return a()({},t,{age_label:r,create_time:n,rec_level_score:t.rec_level/2,sex_label:Object(c.k)(t.sex),grade_label_list:e.grade_label_list(t.grade_list),subject_label_list:e.subject_label_list(t.subject_list)})}),e.total=t.total_count}).finally(function(){e.loading=!1})},search:function(){this.page=1,this.fetch()},reload:function(){this.fetch()}}},g=(r("9KaR"),r("KHd+")),m=Object(g.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"component-card"},[r("div",[r("div",{staticClass:"table-block"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.data_list,size:"mini",stripe:""},on:{"sort-change":e.install_sort_change}},[r("el-table-column",{attrs:{align:"center",label:"应用名称",width:"160",prop:"soft_name"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",width:"140",label:"学科",prop:"subject_list"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-row",{staticClass:"table-item table-item-center",attrs:{gutter:1}},e._l(t.row.subject_label_list,function(t,n){return r("el-col",{key:n,staticClass:"show-list-content",attrs:{span:8}},[r("el-tag",{attrs:{size:"mini"}},[e._v(e._s(t))])],1)}),1)]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",width:"250",label:"所属年级",prop:"grade_list"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-row",{staticClass:"table-item",attrs:{gutter:2}},e._l(t.row.grade_label_list,function(t,n){return r("el-col",{key:n,staticClass:"show-list-content",attrs:{span:8}},[r("el-tag",{staticClass:"show-list-item",attrs:{size:"mini"}},[e._v(e._s(t))])],1)}),1)]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"适用年龄",prop:"age_label"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"适用性别",prop:"sex_label"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"custom",align:"center",label:"安装次数",prop:"install_count"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"星级",prop:"rec_level",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"rate-style-with-application"},[r("el-rate",{attrs:{"allow-half":!0,colors:["#99A9BF","#F7BA2A","#FF9900"],disabled:""},model:{value:t.row.rec_level_score,callback:function(r){e.$set(t.row,"rec_level_score",r)},expression:"scope.row.rec_level_score"}}),e._v(" "),r("span",[e._v(e._s(t.row.rec_level)+"分")])],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"所在组合",width:"250",prop:"group_list"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-row",{staticClass:"table-item",attrs:{gutter:2}},e._l(t.row.group_list,function(t,n){return r("el-col",{key:n,staticClass:"show-list-content",attrs:{span:8}},[r("el-tag",{staticClass:"show-list-item",attrs:{size:"mini"}},[e._v(e._s(t))])],1)}),1)]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"创建日期",prop:"create_time",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"操作",prop:"total_user",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("gl-button",{attrs:{pid:"20075",size:"small",type:"text"},on:{click:function(r){return e.edit_application(t.row)}}},[e._v("编辑")]),e._v(" "),r("gl-button",{attrs:{pid:"20076",size:"small",type:"text"},on:{click:function(r){return e.delete_application(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.page,"page-size":e.page_size,"page-sizes":e.page_sizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.change_current,"size-change":e.table_size_change}})],1)])])},[],!1,null,"6b4aa142",null).exports,p={name:"ApplicationCreate",create:function(){this.isCreate?this.initital_with_none():this.initital_with_row()},props:{isCreate:{type:Boolean,default:!0},isShow:{type:Boolean,default:!1},current:{type:Object,default:function(){return{}}}},data:function(){return{is_busy:!1,app_tags:[],app_list:[],grades:i.x,subjects:i.Q,sex_list:i.O,ruleForm:{record_id:"",soft_name:"",rec_bundle_id:"",rec_level:5,grade_list:[],subject_list:[],start_age:0,end_age:99,sex:"2",rec_phrase:"",rec_desc:""},rules:{rec_bundle_id:{required:!0,message:"请输入应用名称",trigger:"blur"},grade_list:{required:!0,message:"请输入适用年级",trigger:"blur"},subject_list:{required:!0,message:"请输入适用学科",trigger:"blur"},start_age:{required:!0,message:"请输入适用起始年龄",trigger:"blur"},end_age:{required:!0,message:"请输入适用终止年龄",trigger:"blur"},sex:{required:!0,message:"请选择用户性别",trigger:"blur"},rec_level:{required:!0,message:"请选择推荐星级",trigger:"blur"},rec_phrase:[{required:!0,message:"应用推荐语不能为空",trigger:"blur"},{required:!0,max:20,message:"应用推荐语不能超过20个字",trigger:"blur"}],rec_desc:{required:!0,message:"推荐理由不能为空",trigger:"blur"}}}},computed:{title:function(){return this.isCreate?"创建应用":"编辑应用"},score:{get:function(){return this.ruleForm.rec_level/2},set:function(e){this.ruleForm.rec_level=2*e}}},watch:{isCreate:{immediate:!0,handler:function(e){e?this.initital_with_none():this.initital_with_row(this.current)}}},mounted:function(){},methods:{initital_with_none:function(){this.ruleForm={rec_bundle_id:"",soft_name:"",rec_level:5,grade_list:[],subject_list:[],start_age:0,end_age:99,sex:"2",rec_phrase:"",rec_desc:""}},initital_with_row:function(e){var t=void 0;t=void 0===e?this.current:e,this.ruleForm={record_id:t.record_id,rec_bundle_id:t.rec_bundle_id,soft_name:t.soft_name,rec_level:t.rec_level,grade_list:t.grade_list,subject_list:Object(c.s)(t.subject_list),start_age:t.start_age,end_age:t.end_age,sex:t.sex,rec_phrase:t.rec_phrase,rec_desc:t.rec_desc},t.rec_bundle_id&&t.soft_name&&(this.app_list=[{soft_name:t.soft_name,rec_bundle_id:t.rec_bundle_id}])},handle_close:function(e){var t=this;this.$confirm("确认关闭？").then(function(e){t.$emit("receive",!1)}).catch(function(e){})},get_application_config:function(){var e={soft_name:this.ruleForm.soft_name,grade_list:this.ruleForm.grade_list,subject_list:Object(c.r)(this.ruleForm.subject_list),start_age:this.ruleForm.start_age,end_age:this.ruleForm.end_age,sex:this.ruleForm.sex,rec_level:this.ruleForm.rec_level,rec_phrase:this.ruleForm.rec_phrase,rec_desc:this.ruleForm.rec_desc};return this.isCreate?e.rec_bundle_id=this.ruleForm.rec_bundle_id:e.record_id=this.ruleForm.record_id,e},cancel:function(){this.$emit("receive",!1)},emmit_application:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var r=e.get_application_config();e.isCreate?e.create(r):e.edit(r)})},create:function(e){var t=this;this.is_busy=!0,Object(s.l)(e).then(function(e){0===e.status?(t.$emit("receive"),t.$message.success(e.message)):t.$message.error(e.message)}).finally(function(){t.is_busy=!1})},edit:function(e){var t=this;this.is_busy=!0,Object(s.H)(e).then(function(e){0===e.status?(t.$emit("receive"),t.$message.success(e.message)):t.$message.error(e.message)}).finally(function(){t.is_busy=!1})},change_app:function(e){var t=this.app_list.filter(function(t){return t.rec_bundle_id===e});this.ruleForm.soft_name=t[0].soft_name},remote_application:function(e){this.get_application_list(e)},get_application_list:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r={kw:null===t?"":t};Object(s.ec)(r).then(function(t){e.app_list=t.data.map(function(e){return{soft_name:e.app_name,rec_bundle_id:e.bundle_id,description:e.description,icon_url:e.icon_url}})}).catch(function(){e.app_list=[]})}}},f=(r("l0i1"),{components:{applicationList:m,applicationCreate:Object(g.a)(p,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"component-card"},[r("el-dialog",{attrs:{"before-close":e.handle_close,title:e.title,visible:e.isShow,width:"50%"},on:{"update:visible":function(t){e.isShow=t}}},[r("div",{staticClass:"show-dialog-pannel"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"应用名称:",prop:"rec_bundle_id"}},[r("el-select",{staticClass:"application-name-input",staticStyle:{width:"100%"},attrs:{filterable:!0,remote:!0,"remote-method":e.remote_application,disabled:!e.isCreate,"collapse-tags":"",clearable:"",placeholder:"添加应用",size:"mini"},on:{change:e.change_app},model:{value:e.ruleForm.rec_bundle_id,callback:function(t){e.$set(e.ruleForm,"rec_bundle_id",t)},expression:"ruleForm.rec_bundle_id"}},e._l(e.app_list,function(t,n){return r("el-option",{key:n,staticClass:"el-select-dropdown__item__recommend",attrs:{label:t.soft_name,value:t.rec_bundle_id}},[r("div",{staticClass:"select-slot-block"},[r("img",{attrs:{src:t.icon_url,alt:t.app_name}}),e._v(" "),r("span",{attrs:{title:t.app_name}},[e._v(e._s(t.soft_name))])])])}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"适用年级:",prop:"grade_list"}},[r("el-checkbox-group",{model:{value:e.ruleForm.grade_list,callback:function(t){e.$set(e.ruleForm,"grade_list",t)},expression:"ruleForm.grade_list"}},[r("el-row",{attrs:{span:24}},[e._l(e.grades,function(t,n){return[r("el-col",{key:n,attrs:{span:4}},[r("el-checkbox",{key:n,attrs:{label:t.val}},[e._v(e._s(t.name))])],1)]})],2)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"适用学科:",prop:"subject_list"}},[r("el-checkbox-group",{model:{value:e.ruleForm.subject_list,callback:function(t){e.$set(e.ruleForm,"subject_list",t)},expression:"ruleForm.subject_list"}},[r("el-row",{attrs:{span:24}},e._l(e.subjects,function(t,n){return r("el-col",{key:n,attrs:{span:4}},[r("el-checkbox",{key:n,attrs:{label:t.name}},[e._v(e._s(t.name)+"\n                ")])],1)}),1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"适用年龄:",prop:"start_age"}},[r("el-row",{staticClass:"age-group-block"},[r("el-col",{attrs:{span:2}},[r("el-input",{staticClass:"age-group-sub-block",attrs:{min:0,max:99,size:"mini",placeholder:"请输入年龄段"},model:{value:e.ruleForm.start_age,callback:function(t){e.$set(e.ruleForm,"start_age",t)},expression:"ruleForm.start_age"}})],1),e._v(" "),r("el-col",{attrs:{span:1}},[r("span",{staticClass:"grade-to-word"},[e._v("-")])]),e._v(" "),r("el-col",{attrs:{span:2}},[r("el-input",{staticClass:"age-group-sub-block",attrs:{min:0,max:99,size:"mini",placeholder:"请输入年龄段"},model:{value:e.ruleForm.end_age,callback:function(t){e.$set(e.ruleForm,"end_age",t)},expression:"ruleForm.end_age"}})],1),e._v(" "),r("el-col",{attrs:{span:2}},[r("span",{staticClass:"grade-to-word"},[e._v("岁")])])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"适用性别:",prop:"sex"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"性别",size:"mini"},model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},e._l(e.sex_list,function(e){return r("el-option",{key:e.val,attrs:{label:e.name,value:e.val}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"推荐星级:",prop:"score"}},[r("div",{staticClass:"rate-display"},[r("el-rate",{attrs:{"allow-half":!0,max:5,colors:["#99A9BF","#F7BA2A","#FF9900"]},model:{value:e.score,callback:function(t){e.score=t},expression:"score"}}),e._v(" "),r("span",[e._v(e._s(e.ruleForm.rec_level)+"分")])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"应用推荐语:",prop:"rec_phrase"}},[r("el-input",{attrs:{maxlength:"20",placeholder:"请输入应用推荐语(20字内)",size:"mini"},model:{value:e.ruleForm.rec_phrase,callback:function(t){e.$set(e.ruleForm,"rec_phrase",t)},expression:"ruleForm.rec_phrase"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"推荐理由:",prop:"rec_desc"}},[r("el-input",{attrs:{maxlength:"200",columns:"10",placeholder:"请输入推荐理由(200字内)",rows:"5",size:"mini",resize:"none",type:"textarea"},model:{value:e.ruleForm.rec_desc,callback:function(t){e.$set(e.ruleForm,"rec_desc",t)},expression:"ruleForm.rec_desc"}})],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),r("gl-button",{attrs:{disabled:e.is_busy,pid:"10046,10055",size:"mini",type:"primary"},on:{click:e.emmit_application}},[e._v("确 定")])],1)])],1)},[],!1,null,"7ec76db8",null).exports},data:function(){return{information:{grade_from:"",grade_to:"",subject:[],app_name:""},is_create:!1,current_app:{},show_app_dialog:!1,subject_list:i.Q,grade_list_1:i.x,grade_list_2:i.x}},computed:{condition:function(){var e={};return e.begin_grade=this.information.grade_from,e.end_grade=this.information.grade_to,e.subject_list=this.information.subject,e.soft_name=this.information.app_name,e}},watch:{information:{handler:function(e,t){e.grade_from!==t.grade&&this.grade_from_change(e.grade_from,t.grade)},deep:!0}},mounted:function(){},methods:{grade_from_change:function(e,t){this.grade_list_2=i.x.filter(function(t){return t.val>=e}),this.grade_to<e&&(this.grade_to=this.grade_list_2[0].val)},create_app:function(){this.is_create=!0,this.show_app_dialog=!0},edit_app:function(e){this.current_app=e,this.is_create=!1,this.show_app_dialog=!0,this.$refs.app_dialog.initital_with_row(this.current_app)},delete_app:function(e){this.forbidden(e)},forbidden:function(e){var t=this,r={record_id:e};Object(s.M)(r).then(function(e){0===e.status?(t.$message.success(e.message),t.query()):t.$message.error(e.message)})},receive:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.$refs.app_list.reload(),this.show_app_dialog=!1,this.is_create=!this.is_create},next_tick_query:function(e){var t=this;this.$nextTick(function(e){t.query()})},query:function(){this.$refs.app_list.search()},reflex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.params;"delete"===t?this.delete_app(r.record_id):"edit"===t&&(this.current_app=a()({},r),this.edit_app(r))}}}),_=(r("jIVw"),Object(g.a)(f,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gelei-content"},[r("div",{staticClass:"content-body"},[r("div",{staticClass:"search-area"},[r("el-row",{staticClass:"row-bg",attrs:{gutter:10}},[r("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:8,lg:6,xl:6}},[r("div",{staticClass:"grid-content bg-purple-light"},[r("el-row",[r("el-col",{staticClass:"order-number-list",attrs:{span:4}},[e._v("年级:")]),e._v(" "),r("el-col",{staticClass:"order-value-list",attrs:{span:20}},[r("el-select",{staticClass:"select-box-width",attrs:{clearable:"",size:"mini",placeholder:"请选择年级"},on:{change:e.next_tick_query},model:{value:e.information.grade_from,callback:function(t){e.$set(e.information,"grade_from",t)},expression:"information.grade_from"}},e._l(e.grade_list_1,function(e){return r("el-option",{key:e.val,attrs:{label:e.name,value:e.val}})}),1),e._v(" "),r("span",{staticClass:"grade-to-word"},[e._v("至")]),e._v(" "),r("el-select",{staticClass:"select-box-width",attrs:{clearable:"",size:"mini",placeholder:"请选择年级"},on:{change:e.next_tick_query},model:{value:e.information.grade_to,callback:function(t){e.$set(e.information,"grade_to",t)},expression:"information.grade_to"}},e._l(e.grade_list_2,function(e){return r("el-option",{key:e.val,attrs:{label:e.name,value:e.val}})}),1)],1)],1)],1)]),e._v(" "),r("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:6,md:6,lg:4,xl:4}},[r("div",{staticClass:"grid-content bg-purple-light"},[r("el-row",[r("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("学科:")]),e._v(" "),r("el-col",{attrs:{span:16}},[r("el-select",{staticClass:"select-box-width",attrs:{clearable:"","collapse-tags":"",multiple:"",size:"mini",placeholder:"请选择学科"},on:{change:e.next_tick_query},model:{value:e.information.subject,callback:function(t){e.$set(e.information,"subject",t)},expression:"information.subject"}},e._l(e.subject_list,function(e){return r("el-option",{key:e.val,attrs:{label:e.name,value:e.val}})}),1)],1)],1)],1)]),e._v(" "),r("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:6,md:6,lg:6,xl:4}},[r("div",{staticClass:"grid-content bg-purple-light"},[r("el-row",[r("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("应用名称:")]),e._v(" "),r("el-col",{attrs:{span:16}},[r("el-input",{staticClass:"select-box-width",attrs:{size:"mini",clearable:""},on:{change:e.next_tick_query},model:{value:e.information.app_name,callback:function(t){e.$set(e.information,"app_name",t)},expression:"information.app_name"}})],1)],1)],1)]),e._v(" "),r("el-col",{staticClass:"col-bg layout-right",attrs:{xs:12,sm:4,md:4,lg:8,xl:10}},[r("el-row",[r("gl-button",{staticClass:"download details-tab",attrs:{pid:"20031",size:"mini",type:"success"},on:{click:e.create_app}},[e._v("创建应用\n              "),r("svg-icon",{attrs:{"icon-class":"download"}})],1)],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"between-search-area-and-table-display"}),e._v(" "),r("div",{staticClass:"content-body"},[r("application-list",{ref:"app_list",attrs:{condition:e.condition},on:{reflex:e.reflex}}),e._v(" "),r("application-create",{ref:"app_dialog",attrs:{current:e.current_app,"is-create":e.is_create,"is-show":e.show_app_dialog},on:{receive:e.receive}})],1)])])},[],!1,null,"acedf20c",null));t.default=_.exports}}]);