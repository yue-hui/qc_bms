(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3391"],{"6u+r":function(t,e,a){"use strict";a.r(e);var s=a("QbLZ"),n=a.n(s),r=a("GQeE"),l=a.n(r),o=a("FyfS"),i=a.n(o),c=a("gDS+"),_=a.n(c),d=a("YP4+"),u=a("S583"),p=a("z0WU"),g=a("1gIL"),m=a("X4fA"),b={components:{},data:function(){var t=Object(m.a)();return{query_sets:{order_no:"",order_time_range:[],order_desc:"",order_status:"",pay_type:"",nick_name:"",contact_phone:""},order_source:d.e,order_status_list:d.v,pay_type_mode:d.I,order_data:[],download_loading:!1,page:1,page_size:t,page_sizes:d.H,total:0,total_amount:""}},computed:{},mounted:function(){this.init()},methods:{get_order_status_style:function(t){return"交易成功"===t?"#55ff5b":"待支付"===t?"#ff0000":"已支付"===t?"#55ff5b":"已超时"===t?"#55965b":"已退款"===t?"#55965b":"交易取消"===t?"#55965b":""},init:function(){var t=this;this.fetch_order_list(),Object(g.b)().then(function(e){t.order_source=e.order_source,t.order_status_list=e.order_status_list,t.pay_type_mode=e.pay_type_mode})},get_condition:function(){var t=JSON.parse(_()(this.query_sets)),e=t.order_time_range;delete t.order_time_range;var a={};e[0]&&e[1]&&(a={begin_time:new Date(e[0]).getTime(),end_time:new Date(e[1]).getTime()});var s=!0,n=!1,r=void 0;try{for(var o,c=i()(l()(t));!(s=(o=c.next()).done);s=!0){var d=o.value;t[d]&&(a[d]=t[d])}}catch(t){n=!0,r=t}finally{try{!s&&c.return&&c.return()}finally{if(n)throw r}}return a},get_condition_with_pagination:function(){var t=this.get_condition();return t.page_no=this.page,t.page_num=this.page_size,t},table_size_change:function(t){this.page_size=t,Object(m.d)(t),this.query()},change_current:function(t){this.page=t,this.query()},order_list_map:function(t){return t.map(function(t){var e=Object(p.b)(t.order_time,d.j),a=Object(p.c)(t.order_amount);return n()({},t,{order_amount_label:a,order_time_label:e})})},query_condition_change:function(){this.page=1,this.page_size=Object(m.a)(),this.query()},query:function(){this.fetch_order_list()},fetch_order_list:function(){var t=this,e=this.get_condition_with_pagination();Object(u.ab)(e).then(function(e){0===e.status?(t.order_data=t.order_list_map(e.data),t.total=e.total_count,t.total_amount=e.total_amount):(t.total=0,t.total_amount=0)})},download:function(){var t=this;this.download_loading=!0;var e=this.get_condition(),s=n()({},e,{page_no:1,page_num:this.total}),r=Object(p.b)(e.begin_time),l=Object(p.b)(e.end_time),o=void 0;o=r===l?[d.u,r].join("_"):[d.u,r,l].join("_"),Object(u.ab)(s).then(function(e){var s=t.order_list_map(e.data);Promise.all([a.e("chunk-0274"),a.e("chunk-77e8")]).then(a.bind(null,"hTCZ")).then(function(e){var a={header:["订单号","交易单号","交易时间","用户名","订单详情","交易金额","支付方式","订单状态","用户联系方式"],data:t.formatJson(["order_no","pay_order_no","order_time_label","nick_name","order_desc","order_amount_label","pay_type","order_status","contact_phone"],s),filename:o,autoWidth:!0,bookType:"xlsx"};e.export_json_to_excel(a),t.download_loading=!1})}).finally(function(){t.download_loading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}}},v=(a("duLm"),a("KHd+")),h=Object(v.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"content-body"},[a("div",{staticClass:"search-area"},[a("el-row",{staticClass:"row-bg",attrs:{gutter:10}},[a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[t._v("订单号:")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{size:"mini",placeholder:"订单号",clearable:""},on:{change:t.query_condition_change},model:{value:t.query_sets.order_no,callback:function(e){t.$set(t.query_sets,"order_no",e)},expression:"query_sets.order_no"}})],1)],1)],1)]),t._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[t._v("订单详情:")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{size:"mini",placeholder:"订单详情",clearable:""},on:{change:t.query_condition_change},model:{value:t.query_sets.order_desc,callback:function(e){t.$set(t.query_sets,"order_desc",e)},expression:"query_sets.order_desc"}})],1)],1)],1)]),t._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[t._v("订单状态:")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{attrs:{size:"mini",placeholder:"订单状态",clearable:""},on:{change:t.query_condition_change},model:{value:t.query_sets.order_status,callback:function(e){t.$set(t.query_sets,"order_status",e)},expression:"query_sets.order_status"}},t._l(t.order_status_list,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1)]),t._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[t._v("交易方式:")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{attrs:{size:"mini",placeholder:"交易方式",clearable:""},on:{change:t.query_condition_change},model:{value:t.query_sets.pay_type,callback:function(e){t.$set(t.query_sets,"pay_type",e)},expression:"query_sets.pay_type"}},t._l(t.pay_type_mode,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1)]),t._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[t._v("用户名:")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{size:"mini",clearable:""},on:{change:t.query_condition_change},model:{value:t.query_sets.nick_name,callback:function(e){t.$set(t.query_sets,"nick_name",e)},expression:"query_sets.nick_name"}})],1)],1)],1)]),t._v(" "),a("el-col",{staticClass:"col-bg layout-right",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:10}},[t._v("用户联系方式:")]),t._v(" "),a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{size:"mini",clearable:""},on:{change:t.query_condition_change},model:{value:t.query_sets.contact_phone,callback:function(e){t.$set(t.query_sets,"contact_phone",e)},expression:"query_sets.contact_phone"}})],1)],1)],1)]),t._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:18,sm:16,md:12,lg:10,xl:8}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:4}},[t._v("交易时间:")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-date-picker",{attrs:{type:"datetimerange",size:"mini","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.query_condition_change},model:{value:t.query_sets.order_time_range,callback:function(e){t.$set(t.query_sets,"order_time_range",e)},expression:"query_sets.order_time_range"}})],1)],1)],1)]),t._v(" "),a("el-col",{staticClass:"col-bg layout-right col-right-button",attrs:{xs:6,sm:8,md:24,lg:2,xl:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-button",{attrs:{loading:t.download_loading,size:"mini",type:"success"},on:{click:t.download}},[a("i",{staticClass:"el-icon-download el-icon"}),t._v("导出\n              ")])],1)],1)])],1)],1),t._v(" "),a("div",{staticClass:"between-search-area-and-table-display"}),t._v(" "),a("div",{staticClass:"table-content table-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.order_data,size:"mini"}},[a("el-table-column",{attrs:{align:"center",label:"订单号",prop:"order_no",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"交易单号",prop:"pay_order_no",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"交易时间",prop:"order_time_label",width:"132"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户名",prop:"nick_name"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单详情",prop:"order_desc"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"交易金额",prop:"order_amount_label"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"支付方式",prop:"pay_type"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单状态",prop:"order_status"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:t.get_order_status_style(e.row.order_status)}},[t._v(t._s(e.row.order_status))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户联系方式",prop:"contact_phone"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.page_size,"page-sizes":t.page_sizes,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.change_current,"size-change":t.table_size_change}})],1),t._v(" "),a("div",{staticClass:"data-statistics"},[a("div",{staticClass:"data-statistics-content"},[""!==t.total_amount?a("div",{staticClass:"data-item"},[a("div",{staticClass:"name"},[t._v("交易成功合计:")]),t._v(" "),a("div",{staticClass:"value",domProps:{textContent:t._s(t.total_amount)}}),t._v(" "),a("div",{staticClass:"name"},[t._v("元")])]):t._e()])])])])},[],!1,null,"dd2d892e",null);h.options.__file="order_list.vue";e.default=h.exports},duLm:function(t,e,a){"use strict";var s=a("hAZs");a.n(s).a},hAZs:function(t,e,a){}}]);