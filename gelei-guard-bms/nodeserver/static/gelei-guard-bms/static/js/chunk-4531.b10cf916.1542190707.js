(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4531"],{FyfS:function(e,t,a){e.exports={default:a("Rp86"),__esModule:!0}},Rp86:function(e,t,a){a("bBy9"),a("FlQf"),e.exports=a("fXsU")},WqNN:function(e,t,a){"use strict";var r=a("i2pJ");a.n(r).a},Xlpc:function(e,t,a){},crCV:function(e,t,a){"use strict";a.r(t);var r=a("QbLZ"),s=a.n(r),i=a("GQeE"),n=a.n(i),l=a("FyfS"),o=a.n(l),c=a("gDS+"),_=a.n(c),p=a("z0WU"),u=a("S583"),d=[{value:"1",label:"是"},{value:"0",label:"否"}],m={name:"ParameterDialog",props:{showDialog:{type:Boolean,required:!0,default:!1},isNew:{type:Boolean,required:!0,default:!1},rid:{type:String,default:""}},data:function(){return{dialog_title_name:"系统参数",system_configuration_types:[],system_enable_status:d,is_busy:!1,form:{p_id:"",p_type:"",p_type_name:"",p_label:"",p_value:"",enabled:"",row_order:"",remark:""},rules:{p_type:[{required:!0,message:"请选择系统参数类型",trigger:"blur"}],p_type_name:[{required:!0,message:"请填写系统参数类型名称",trigger:"blur"}],p_label:[{required:!0,message:"请填写系统参数标签",trigger:"blur"}],p_value:[{required:!0,message:"请填写系统参数值",trigger:"blur"}],enabled:[{required:!1,message:"请确认系统参数是否立即生效",trigger:"blur"}],row_order:[{required:!0,message:"请填写系统参数排序ID",trigger:"blur"}],remark:[{required:!0,message:"请填写系统参数的备注",trigger:"blur"}]}}},computed:{title:function(){return this.isNew?"创建"+this.dialog_title_name:"编辑"+this.dialog_title_name},show_save_label:function(){return this.isNew?"创 建":"保 存"}},watch:{},mounted:function(){this.fetch_sys_param_type_list(),this.isNew?this.form=this.init_pannel_data():this.fetch_pannel_data()},methods:{init_pannel_data:function(){return{p_id:"",p_type:"",p_type_name:"",p_label:"",p_value:"",enabled:"",row_order:"",remark:""}},fetch_sys_param_type_list:function(){var e=this;Object(u.Ib)().then(function(t){0===t.status?e.system_configuration_types=t.data.map(function(e){return{value:e,name:e}}):e.system_configuration_types=[]})},fetch_pannel_data:function(){var e=this,t={p_id:this.rid};Object(u.Gb)(t).then(function(t){0===t.status?e.form=t.data:e.$message.error(t.message)})},close_dialog:function(){var e=this;this.$confirm("确认关闭？").then(function(t){e.cancel_dialog()}).catch(function(e){})},create_records_item:function(){var e=this;this.is_busy=!0;var t=Object(p.q)(this.form);Object(u.m)(t).then(function(t){0===t.status?(e.$emit("destory",!0),e.$message.success("系统参数创建成功")):(e.$message.error(t.message),e.$emit("destory",!1))}).finally(function(){e.is_busy=!1})},edit_records_item:function(){var e=this;this.is_busy=!0;var t=Object(p.q)(this.form);Object(u.H)(t).then(function(t){0===t.status?e.$emit("destory",!0):(e.$message.error(t.message),e.$emit("destory",!1))}).finally(function(){e.is_busy=!1})},create_update_strage:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.isNew?e.create_records_item():e.edit_records_item())})},cancel_dialog:function(){this.$emit("destory",!1)}}},f=(a("q0q4"),a("KHd+")),g=Object(f.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"component-card"},[a("el-dialog",{attrs:{title:e.title,visible:e.showDialog,"before-close":e.close_dialog,size:"mini",width:"40%"},on:{"update:visible":function(t){e.showDialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-suffix":":",size:"mini","label-width":"120px"}},[e.isNew?e._e():a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{placeholder:"ID",disabled:""},model:{value:e.form.p_id,callback:function(t){e.$set(e.form,"p_id",t)},expression:"form.p_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"p_type"}},[a("el-select",{staticClass:"select-line-style",attrs:{size:"mini",filterable:"",clearable:"",placeholder:"请输入参数类型"},model:{value:e.form.p_type,callback:function(t){e.$set(e.form,"p_type",t)},expression:"form.p_type"}},e._l(e.system_configuration_types,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"p_type_name"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.form.p_type_name,callback:function(t){e.$set(e.form,"p_type_name",t)},expression:"form.p_type_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标签",prop:"p_label"}},[a("el-input",{attrs:{placeholder:"标签"},model:{value:e.form.p_label,callback:function(t){e.$set(e.form,"p_label",t)},expression:"form.p_label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参数",prop:"p_value"}},[a("el-input",{attrs:{placeholder:"参数"},model:{value:e.form.p_value,callback:function(t){e.$set(e.form,"p_value",t)},expression:"form.p_value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可用",prop:"enabled"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"row_order"}},[a("el-input",{attrs:{type:"number",placeholder:"排序"},model:{value:e.form.row_order,callback:function(t){e.$set(e.form,"row_order",t)},expression:"form.row_order"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancel_dialog}},[e._v("取 消")]),e._v(" "),a("gl-button",{attrs:{disabled:e.is_busy,pid:"10048,10044",type:"primary",size:"mini"},on:{click:e.create_update_strage}},[e._v(e._s(e.show_save_label))])],1)],1)],1)},[],!1,null,"9f5e1c64",null).exports,b=a("YP4+"),h=a("X4fA"),v={components:{CreateAndEditParameter:g},data:function(){var e=document.querySelector("body").clientHeight-300,t=Object(h.a)();return{loading:!1,table_height:e,show_records_pannel:!1,record_id:"",is_new_record:!1,query_sets:{p_type_name:""},packages:b.F,status_list:b.E,action:0,parameter:[],page:1,page_size:t,page_sizes:b.T,total:0}},computed:{},mounted:function(){this.fetch_data()},methods:{destory_pannel:function(e){e&&this.fetch_data(),this.show_records_pannel=!1},create_records:function(){this.show_records_pannel=!0,this.is_new_record=!0,this.record_id=""},edit_configration:function(e){this.show_records_pannel=!0,this.is_new_record=!1,this.record_id=e.p_id},delete_configration:function(e){var t=this;this.$confirm("确认删除系统参数么？").then(function(a){var r={p_id:e.p_id};Object(u.s)(r).then(function(e){0===e.status?(t.fetch_data(),t.$message.success(e.message)):t.$message.error(e.message)})})},get_condition:function(){var e=JSON.parse(_()(this.query_sets)),t={},a=!0,r=!1,s=void 0;try{for(var i,l=o()(n()(e));!(a=(i=l.next()).done);a=!0){var c=i.value;e[c]&&(t[c]=e[c])}}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}return t.page_no=this.page,t.page_num=this.page_size,t},get_condition_with_pagination:function(){var e=this.get_condition();return e.page_no=this.page,e.page_num=this.page_size,e},query_condition_change:function(){this.page=1,this.page_size=Object(h.a)(),this.query()},query:function(){this.fetch_data()},table_size_change:function(e){this.page_size=e,Object(h.d)(e),this.fetch_data()},change_current:function(e){this.page=e,this.fetch_data()},close_package_dialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.action=0,this.current={},e&&this.fetch_data()},create_package:function(){this.action=1,this.current={}},fetch_data:function(){var e=this,t=this.get_condition();this.loading=!0,Object(u.Hb)(t).then(function(t){0===t.status?(e.parameter=t.data.map(function(t,a){var r=a+e.page_size*(e.page-1)+1,i="1"===t.enabled?"是":"否";return s()({},t,{_id:r,enabled_label:i})}),e.total=t.total_count):e.$message.error(t.message)}).finally(function(){e.loading=!1})}}},y=(a("WqNN"),Object(f.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content-body"},[a("div",{staticClass:"search-area"},[a("el-row",{staticClass:"row-bg",attrs:{gutter:10}},[a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:5,xl:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("模糊搜索:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{size:"mini",placeholder:"记录信息",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.p_type_name,callback:function(t){e.$set(e.query_sets,"p_type_name",t)},expression:"query_sets.p_type_name"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg layout-right",attrs:{xs:12,sm:16,md:18,lg:19,xl:20}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("gl-button",{attrs:{pid:"20060",size:"mini",type:"success"},on:{click:e.create_records}},[e._v("创建系统参数")])],1)],1)])],1)],1),e._v(" "),a("div",{staticClass:"between-search-area-and-table-display"}),e._v(" "),a("div",{staticClass:"table-content table-block"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.parameter,size:"mini"}},[a("el-table-column",{attrs:{label:"序列号",prop:"_id"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数类型",prop:"p_type"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数类型名称",prop:"p_type_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数显示名称",prop:"p_label"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数值",prop:"p_value"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否可用",prop:"enabled_label"}}),e._v(" "),a("el-table-column",{attrs:{label:"排序号",prop:"row_order"}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",prop:"control"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("gl-button",{attrs:{pid:"20082",size:"small",type:"text"},on:{click:function(a){return e.edit_configration(t.row)}}},[e._v("编辑")]),e._v(" "),a("gl-button",{attrs:{pid:"20083",size:"small",type:"text"},on:{click:function(a){return e.delete_configration(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.page,"page-size":e.page_size,"page-sizes":e.page_sizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.change_current,"size-change":e.table_size_change}})],1)]),e._v(" "),e.show_records_pannel?a("create-and-edit-parameter",{attrs:{"show-dialog":e.show_records_pannel,"is-new":e.is_new_record,rid:e.record_id},on:{destory:e.destory_pannel}}):e._e()],1)},[],!1,null,"8c14d29c",null));t.default=y.exports},fXsU:function(e,t,a){var r=a("5K7Z"),s=a("fNZA");e.exports=a("WEpk").getIterator=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},i2pJ:function(e,t,a){},q0q4:function(e,t,a){"use strict";var r=a("Xlpc");a.n(r).a}}]);