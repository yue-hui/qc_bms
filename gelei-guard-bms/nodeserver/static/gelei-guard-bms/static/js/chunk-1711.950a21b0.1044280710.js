(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1711"],{"1gIL":function(e,t,a){"use strict";a.d(t,"b",function(){return _}),a.d(t,"a",function(){return u});var n,r,s=a("14Xm"),l=a.n(s),o=a("D3Ub"),i=a.n(o),c=a("S583"),_=(n=i()(l.a.mark(function e(){var t,a,n,r,s,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.vb)();case 2:return t=e.sent,e.next=5,Object(c.ub)();case 5:return a=e.sent,e.next=8,Object(c.tb)();case 8:return n=e.sent,r=t.data.map(function(e){return{label:e.name,value:e.value}}),s=a.data.map(function(e){return{label:e.name,value:e.value}}),o=n.data.map(function(e){return{label:e.name,value:e.value}}),e.abrupt("return",{order_source:r,order_status_list:s,pay_type_mode:o});case 13:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),u=(r=i()(l.a.mark(function e(){var t,a,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.O)();case 2:return t=e.sent,e.next=5,Object(c.N)();case 5:return a=e.sent,n=t.data.map(function(e){return{label:e.name,value:e.value}}),r=a.data.map(function(e){return{label:e.name,value:e.value}}),e.abrupt("return",{advertising_type:n,advertising_point:r});case 9:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},"2mqV":function(e,t,a){"use strict";var n=a("nu6P");a.n(n).a},"6u+r":function(e,t,a){"use strict";a.r(t);var n=a("QbLZ"),r=a.n(n),s=a("GQeE"),l=a.n(s),o=a("FyfS"),i=a.n(o),c=a("gDS+"),_=a.n(c),u=a("YP4+"),d=a("S583"),p=a("z0WU"),m=a("1gIL"),g=a("X4fA"),b={components:{},data:function(){var e=Object(g.a)();return{loading:!1,query_sets:{order_no:"",order_time_range:[],order_desc:"",order_status:"",pay_type:"",nick_name:"",channel_name:"",contact_phone:""},order_source:u.h,order_status_list:[],pay_type_mode:[],order_data:[],download_loading:!1,page:1,page_size:e,page_sizes:u.T,total:0,total_amount:""}},computed:{},mounted:function(){this.init()},methods:{get_order_status_style:function(e){return"交易成功"===e?"#55ff5b":"待支付"===e?"#ff0000":"已支付"===e?"#55ff5b":"已超时"===e?"#55965b":"已退款"===e?"#55965b":"交易取消"===e?"#55965b":""},init:function(){var e=this;this.fetch_order_list(),Object(m.b)().then(function(t){e.order_source=t.order_source,e.order_status_list=t.order_status_list,e.pay_type_mode=t.pay_type_mode})},get_condition:function(){var e=JSON.parse(_()(this.query_sets)),t=e.order_time_range;delete e.order_time_range;var a={};t&&t[0]&&t[1]&&(a={begin_time:new Date(t[0]).getTime(),end_time:new Date(t[1]).getTime()});var n=!0,r=!1,s=void 0;try{for(var o,c=i()(l()(e));!(n=(o=c.next()).done);n=!0){var u=o.value;e[u]&&(a[u]=e[u])}}catch(e){r=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw s}}return a},get_condition_with_pagination:function(){var e=this.get_condition();return e.page_no=this.page,e.page_num=this.page_size,e},table_size_change:function(e){this.page_size=e,Object(g.d)(e),this.query()},change_current:function(e){this.page=e,this.query()},order_list_map:function(e){var t=this;return e.map(function(e){var a=Object(p.b)(e.order_time,u.o),n=Object(p.d)(e.order_amount),s=Object(p.o)(e.member_type,t.patriarch_member_types);return r()({},e,{order_amount_label:n,order_time_label:a,member_type_label:s})})},query_condition_change:function(){this.page=1,this.page_size=Object(g.a)(),this.query()},query:function(){this.fetch_order_list()},fetch_order_list:function(){var e=this,t=this.get_condition_with_pagination();"04"===t.member_type&&(t.member_type="03",t.pay_type="06"),this.loading=!0,Object(d.sb)(t).then(function(t){0===t.status?(e.order_data=e.order_list_map(t.data),e.total=t.total_count,e.total_amount=t.total_amount):(e.total=0,e.total_amount=0)}).finally(function(){e.loading=!1})},download:function(){var e=this;this.download_loading=!0;var t=this.get_condition(),n=r()({},t,{page_no:1,page_num:this.total}),s=Object(p.b)(t.begin_time),l=Object(p.b)(t.end_time),o=void 0;o=s===l?[u.D,s].join("_"):[u.D,s,l].join("_"),Object(d.sb)(n).then(function(t){var n=e.order_list_map(t.data);Promise.all([a.e("chunk-3c5e"),a.e("chunk-6aa1")]).then(a.bind(null,"hTCZ")).then(function(t){var a={header:["订单号","交易单号","交易时间","用户名","订单详情","会员类型","交易金额","支付方式","订单状态","用户联系方式","用户来源渠道"],data:e.formatJson(["order_no","pay_order_no","order_time_label","nick_name","order_desc","member_type_label","order_amount_label","pay_type","order_status","contact_phone","channel_name"],n),filename:o,autoWidth:!0,bookType:"xlsx"};t.export_json_to_excel(a),e.download_loading=!1})}).finally(function(){e.download_loading=!1})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})}}},v=(a("2mqV"),a("KHd+")),h=Object(v.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content-body"},[a("div",{staticClass:"search-area"},[a("el-row",{staticClass:"row-bg",attrs:{gutter:10}},[a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("订单号:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{size:"mini",placeholder:"订单号",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.order_no,callback:function(t){e.$set(e.query_sets,"order_no",t)},expression:"query_sets.order_no"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("订单详情:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{size:"mini",placeholder:"订单详情",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.order_desc,callback:function(t){e.$set(e.query_sets,"order_desc",t)},expression:"query_sets.order_desc"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("订单状态:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{attrs:{size:"mini",placeholder:"订单状态",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.order_status,callback:function(t){e.$set(e.query_sets,"order_status",t)},expression:"query_sets.order_status"}},e._l(e.order_status_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("交易方式:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{attrs:{size:"mini",placeholder:"交易方式",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.pay_type,callback:function(t){e.$set(e.query_sets,"pay_type",t)},expression:"query_sets.pay_type"}},e._l(e.pay_type_mode,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("用户名:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{size:"mini",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.nick_name,callback:function(t){e.$set(e.query_sets,"nick_name",t)},expression:"query_sets.nick_name"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg layout-right",attrs:{xs:12,sm:8,md:6,lg:6,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:10}},[e._v("用户联系方式:")]),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{size:"mini",clearable:""},on:{change:e.query_condition_change},model:{value:e.query_sets.contact_phone,callback:function(t){e.$set(e.query_sets,"contact_phone",t)},expression:"query_sets.contact_phone"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:5,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("用户来源渠道:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{size:"mini",clearable:"",placeholder:"请输入来源渠道"},on:{change:e.query_condition_change},model:{value:e.query_sets.channel_name,callback:function(t){e.$set(e.query_sets,"channel_name",t)},expression:"query_sets.channel_name"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg",attrs:{xs:18,sm:16,md:12,lg:10,xl:8}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("el-col",{staticClass:"order-number-list",attrs:{span:4}},[e._v("交易时间:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-date-picker",{attrs:{type:"daterange",size:"mini","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.query_condition_change},model:{value:e.query_sets.order_time_range,callback:function(t){e.$set(e.query_sets,"order_time_range",t)},expression:"query_sets.order_time_range"}})],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"col-bg layout-right col-right-button",attrs:{xs:18,sm:24,md:18,lg:21,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-row",[a("gl-button",{attrs:{loading:e.download_loading,pid:"20007",size:"mini",type:"success"},on:{click:e.download}},[a("i",{staticClass:"el-icon-download el-icon"}),e._v("导出\n              ")])],1)],1)])],1)],1),e._v(" "),a("div",{staticClass:"between-search-area-and-table-display"}),e._v(" "),a("div",{staticClass:"table-content table-block"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.order_data,size:"mini",stripe:""}},[a("el-table-column",{attrs:{align:"center",label:"订单号",prop:"order_no",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"交易单号",prop:"pay_order_no",width:"136"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"交易时间",prop:"order_time_label",width:"132"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户名",prop:"nick_name"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单详情",prop:"order_desc"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"交易金额",prop:"order_amount_label"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"支付方式",prop:"pay_type"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单状态",prop:"order_status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:e.get_order_status_style(t.row.order_status)}},[e._v(e._s(t.row.order_status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户联系方式",prop:"contact_phone"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户来源渠道",prop:"channel_name"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.page,"page-size":e.page_size,"page-sizes":e.page_sizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.change_current,"size-change":e.table_size_change}})],1),e._v(" "),a("div",{staticClass:"data-statistics"},[a("div",{staticClass:"data-statistics-content"},[""!==e.total_amount?a("div",{staticClass:"data-item"},[a("div",{staticClass:"name"},[e._v("交易成功合计:")]),e._v(" "),a("div",{staticClass:"value",domProps:{textContent:e._s(e.total_amount)}}),e._v(" "),a("div",{staticClass:"name"},[e._v("元")])]):e._e()])])])])},[],!1,null,"250a9659",null);t.default=h.exports},FyfS:function(e,t,a){e.exports={default:a("Rp86"),__esModule:!0}},Rp86:function(e,t,a){a("bBy9"),a("FlQf"),e.exports=a("fXsU")},fXsU:function(e,t,a){var n=a("5K7Z"),r=a("fNZA");e.exports=a("WEpk").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},nu6P:function(e,t,a){}}]);