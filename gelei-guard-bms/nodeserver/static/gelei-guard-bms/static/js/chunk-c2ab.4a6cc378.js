(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c2ab"],{"9QCZ":function(e,t,n){"use strict";var r=n("Bs6Y");n.n(r).a},Bs6Y:function(e,t,n){},FyfS:function(e,t,n){e.exports={default:n("Rp86"),__esModule:!0}},RNf3:function(e,t,n){},Rp86:function(e,t,n){n("bBy9"),n("FlQf"),e.exports=n("fXsU")},S583:function(e,t,n){"use strict";n.d(t,"yb",function(){return a}),n.d(t,"xb",function(){return u}),n.d(t,"wb",function(){return i}),n.d(t,"P",function(){return o}),n.d(t,"O",function(){return s}),n.d(t,"hb",function(){return c}),n.d(t,"gb",function(){return l}),n.d(t,"Zb",function(){return d}),n.d(t,"Ab",function(){return m}),n.d(t,"Bb",function(){return f}),n.d(t,"zb",function(){return g}),n.d(t,"bc",function(){return p}),n.d(t,"ub",function(){return _}),n.d(t,"gc",function(){return b}),n.d(t,"Z",function(){return h}),n.d(t,"cb",function(){return v}),n.d(t,"Xb",function(){return j}),n.d(t,"Y",function(){return O}),n.d(t,"ab",function(){return y}),n.d(t,"Cb",function(){return w}),n.d(t,"Eb",function(){return k}),n.d(t,"g",function(){return x}),n.d(t,"ic",function(){return z}),n.d(t,"Db",function(){return q}),n.d(t,"r",function(){return C}),n.d(t,"Wb",function(){return $}),n.d(t,"Vb",function(){return U}),n.d(t,"Ub",function(){return S}),n.d(t,"Rb",function(){return B}),n.d(t,"Tb",function(){return E}),n.d(t,"Sb",function(){return R}),n.d(t,"Qb",function(){return T}),n.d(t,"Yb",function(){return F}),n.d(t,"V",function(){return M}),n.d(t,"U",function(){return N}),n.d(t,"mb",function(){return Q}),n.d(t,"l",function(){return X}),n.d(t,"H",function(){return A}),n.d(t,"M",function(){return J}),n.d(t,"ec",function(){return L}),n.d(t,"Ib",function(){return V}),n.d(t,"k",function(){return Z}),n.d(t,"L",function(){return D}),n.d(t,"Jb",function(){return W}),n.d(t,"G",function(){return P}),n.d(t,"v",function(){return I}),n.d(t,"u",function(){return K}),n.d(t,"T",function(){return G}),n.d(t,"b",function(){return Y}),n.d(t,"t",function(){return H}),n.d(t,"fc",function(){return ee}),n.d(t,"z",function(){return te}),n.d(t,"S",function(){return ne}),n.d(t,"vb",function(){return re}),n.d(t,"rb",function(){return ae}),n.d(t,"sb",function(){return ue}),n.d(t,"Q",function(){return ie}),n.d(t,"o",function(){return oe}),n.d(t,"e",function(){return se}),n.d(t,"hc",function(){return ce}),n.d(t,"pb",function(){return le}),n.d(t,"ob",function(){return de}),n.d(t,"qb",function(){return me}),n.d(t,"d",function(){return fe}),n.d(t,"D",function(){return ge}),n.d(t,"N",function(){return pe}),n.d(t,"a",function(){return _e}),n.d(t,"y",function(){return be}),n.d(t,"n",function(){return he}),n.d(t,"ac",function(){return ve}),n.d(t,"Gb",function(){return je}),n.d(t,"j",function(){return Oe}),n.d(t,"F",function(){return ye}),n.d(t,"K",function(){return we}),n.d(t,"Fb",function(){return ke}),n.d(t,"cc",function(){return xe}),n.d(t,"Lb",function(){return ze}),n.d(t,"Kb",function(){return qe}),n.d(t,"Mb",function(){return Ce}),n.d(t,"m",function(){return $e}),n.d(t,"I",function(){return Ue}),n.d(t,"s",function(){return Se}),n.d(t,"fb",function(){return Be}),n.d(t,"eb",function(){return Ee}),n.d(t,"c",function(){return Re}),n.d(t,"B",function(){return Te}),n.d(t,"q",function(){return Fe}),n.d(t,"jb",function(){return Me}),n.d(t,"ib",function(){return Ne}),n.d(t,"C",function(){return Qe}),n.d(t,"A",function(){return Xe}),n.d(t,"W",function(){return Ae}),n.d(t,"X",function(){return Je}),n.d(t,"kb",function(){return Le}),n.d(t,"nb",function(){return Ve}),n.d(t,"lb",function(){return Ze}),n.d(t,"x",function(){return De}),n.d(t,"Hb",function(){return We}),n.d(t,"tb",function(){return Pe}),n.d(t,"f",function(){return Ie}),n.d(t,"E",function(){return Ke}),n.d(t,"p",function(){return Ge}),n.d(t,"Pb",function(){return Ye}),n.d(t,"i",function(){return He}),n.d(t,"J",function(){return et}),n.d(t,"dc",function(){return tt}),n.d(t,"Ob",function(){return nt}),n.d(t,"R",function(){return rt}),n.d(t,"Nb",function(){return at}),n.d(t,"h",function(){return ut}),n.d(t,"w",function(){return it}),n.d(t,"db",function(){return ot}),n.d(t,"bb",function(){return st});var r=n("t3Un");function a(){return Object(r.a)({url:"/greenguard/common/order/type/list",method:"post"})}function u(){return Object(r.a)({url:"/greenguard/common/order/status/list",method:"post"})}function i(){return Object(r.a)({url:"/greenguard/common/order/paytype/list",method:"post"})}function o(){return Object(r.a)({url:"/greenguard/common/advertising/type/list",method:"post"})}function s(){return Object(r.a)({url:"/greenguard/common/advertising/point/list",method:"post"})}function c(){return Object(r.a)({url:"/greenguard/manager/index/summary",method:"post"})}function l(e){return Object(r.a)({url:"/greenguard/manager/index/list",method:"post",data:e})}function d(e){return Object(r.a)({url:"/greenguard/common/user/reg_from/list",method:"post",data:e})}function m(e){return Object(r.a)({url:"/greenguard/manager/user/patriarch/list",method:"post",data:e})}function f(e){return Object(r.a)({url:"/greenguard/manager/user/patriarch/list/export",method:"post",data:e})}function g(e){return Object(r.a)({url:"/greenguard/manager/user/patriarch/detail",method:"post",data:e})}function p(e){return Object(r.a)({url:"/greenguard/manager/member/monthlyplan/unsubscribe/ctccsp",method:"post",data:e})}function _(e){return Object(r.a)({url:"/greenguard/manager/member/monthlyplan/unsubscribe/list",method:"post",data:e})}function b(e){return Object(r.a)({url:"/greenguard/manager/device/unbind",method:"post",data:e})}function h(e){return Object(r.a)({url:"/greenguard/manager/user/patriarch/child_device/record/list",method:"post",data:e})}function v(e){return Object(r.a)({url:"/greenguard/manager/device/info/list",method:"post",data:e})}function j(e){return Object(r.a)({url:"/greenguard/manager/user/child/list",method:"post",data:e})}function O(e){return Object(r.a)({url:"/greenguard/manager/user/child/list/export",method:"post",data:e})}function y(e){return Object(r.a)({url:"/greenguard/manager/device/getAppUsage",method:"post",data:e})}function w(e){return Object(r.a)({url:"/greenguard/manager/qa/type/list",method:"post",data:e})}function k(e){return Object(r.a)({url:"/greenguard/manager/qa/list",method:"post",data:e})}function x(e){return Object(r.a)({url:"/greenguard/manager/qa/add",method:"post",data:e})}function z(e){return Object(r.a)({url:"/greenguard/manager/qa/edit",method:"post",data:e})}function q(e){return Object(r.a)({url:"/greenguard/manager/qa/detail",method:"post",data:e})}function C(e){return Object(r.a)({url:"/greenguard/manager/qa/delete",method:"post",data:e})}function $(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/summary",method:"post",data:e})}function U(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/list",method:"post",data:e})}function S(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/child/summary",method:"post",data:e})}function B(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/child/increased",method:"post",data:e})}function E(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/child/increased/bind_user",method:"post",data:e})}function R(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/child/increased/bind_device",method:"post",data:e})}function T(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/child/list",method:"post",data:e})}function F(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/increased",method:"post",data:e})}function M(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/increased/bind_user",method:"post",data:e})}function N(e){return Object(r.a)({url:"/greenguard/manager/user/analyze/increased/bind_device",method:"post",data:e})}function Q(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/list",method:"post",data:e})}function X(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/add",method:"post",data:e})}function A(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/edit",method:"post",data:e})}function J(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/delete",method:"post",data:e})}function L(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/mark/search",method:"post",data:e})}function V(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/group/list",method:"post",data:e})}function Z(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/group/add",method:"post",data:e})}function D(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/group/delete",method:"post",data:e})}function W(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/group/detail",method:"post",data:e})}function P(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/group/edit",method:"post",data:e})}function I(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/group/publish",method:"post",data:e})}function K(e){return Object(r.a)({url:"/greenguard/manager/qa/publish",method:"post",data:e})}function G(e){return Object(r.a)({url:"/greenguard/manager/app/version/list",method:"post",data:e})}function Y(e){return Object(r.a)({url:"/greenguard/manager/app/version/add",method:"post",data:e})}function H(e){return Object(r.a)({url:"/greenguard/manager/app/version/startup",method:"post",data:e})}function ee(e){return Object(r.a)({url:"/greenguard/manager/app/version/send/command",method:"post",data:e})}function te(e){return Object(r.a)({url:"/greenguard/manager/app/version/update",method:"post",data:e})}function ne(e){return Object(r.a)({url:"/greenguard/manager/app/version/get",method:"post",data:e})}function re(e){return Object(r.a)({url:"/greenguard/manager/order/list",method:"post",data:e})}function ae(e){return Object(r.a)({url:"/greenguard/manager/member/plan/flow/list",method:"post",data:e})}function ue(e){return Object(r.a)({url:"/greenguard/manager/member/plan/list",method:"post",data:e})}function ie(e){return Object(r.a)({url:"/greenguard/manager/member/plan/list/all",method:"post",data:e})}function oe(e){return Object(r.a)({url:"/greenguard/manager/member/plan/delete",method:"post",data:e})}function se(e){return Object(r.a)({url:"/greenguard/manager/member/plan/add",method:"post",data:e})}function ce(e){return Object(r.a)({url:"/greenguard/manager/member/plan/edit",method:"post",data:e})}function le(e){return Object(r.a)({url:"/greenguard/manager/member/activity/list",method:"post",data:e})}function de(e){return Object(r.a)({url:"/greenguard/manager/member/activity/info",method:"post",data:e})}function me(e){return Object(r.a)({url:"/greenguard/manager/member/activity/user/list",method:"post",data:e})}function fe(e){return Object(r.a)({url:"/greenguard/manager/member/activity/add",method:"post",data:e})}function ge(e){return Object(r.a)({url:"/greenguard/manager/member/activity/edit",method:"post",data:e})}function pe(e){return Object(r.a)({url:"/greenguard/manager/advertising/list",method:"post",data:e})}function _e(e){return Object(r.a)({url:"/greenguard/manager/advertising/add",method:"post",data:e})}function be(e){return Object(r.a)({url:"/greenguard/manager/advertising/edit",method:"post",data:e})}function he(e){return Object(r.a)({url:"/greenguard/manager/advertising/delete",method:"post",data:e})}function ve(e){return Object(r.a)({url:"/greenguard/manager/app/version/distribution",method:"post",data:e})}function je(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/subject/list",method:"post",data:e})}function Oe(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/subject/add",method:"post",data:e})}function ye(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/subject/edit",method:"post",data:e})}function we(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/subject/delete",method:"post",data:e})}function ke(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/subject/detail",method:"post",data:e})}function xe(e){return Object(r.a)({url:"/greenguard/manager/soft/recommend/subject/publish",method:"post",data:e})}function ze(e){return Object(r.a)({url:"/greenguard/manager/sys/param/list",method:"post",data:e})}function qe(e){return Object(r.a)({url:"/greenguard/manager/sys/param/get",method:"post",data:e})}function Ce(e){return Object(r.a)({url:"/greenguard/manager/sys/param/get/type/list",method:"post",data:e})}function $e(e){return Object(r.a)({url:"/greenguard/manager/sys/param/add",method:"post",data:e})}function Ue(e){return Object(r.a)({url:"/greenguard/manager/sys/param/edit",method:"post",data:e})}function Se(e){return Object(r.a)({url:"/greenguard/manager/sys/param/delete",method:"post",data:e})}function Be(e){return Object(r.a)({url:"/greenguard/manager/risk/soft/list",method:"post",data:e})}function Ee(e){return Object(r.a)({url:"/greenguard/manager/risk/soft/get",method:"post",data:e})}function Re(e){return Object(r.a)({url:"/greenguard/manager/risk/soft/add",method:"post",data:e})}function Te(e){return Object(r.a)({url:"/greenguard/manager/risk/soft/edit",method:"post",data:e})}function Fe(e){return Object(r.a)({url:"/greenguard/manager/risk/soft/delete",method:"post",data:e})}function Me(e){return Object(r.a)({url:"/greenguard/manager/user/invite/register/statistics/list",method:"post",data:e})}function Ne(){return Object(r.a)({url:"/greenguard/manager/user/invite/register/activity/info",method:"post"})}function Qe(e){return Object(r.a)({url:"/greenguard/manager/user/invite/register/activity/edit",method:"post",data:e})}function Xe(e){return Object(r.a)({url:"/greenguard/manager/channel/saveOrUpdate",method:"post",data:e})}function Ae(e){return Object(r.a)({url:"/greenguard/manager/channel/info",method:"post",data:e})}function Je(e){return Object(r.a)({url:"/greenguard/manager/channel/list",method:"post",data:e})}function Le(e){return Object(r.a)({url:"/greenguard/manager/channel/associated/user",method:"post",data:e})}function Ve(e){return Object(r.a)({url:"/greenguard/manager/voice/query/record",method:"post",data:e})}function Ze(e){return Object(r.a)({url:"/greenguard/manager/sms/query/record",method:"post",data:e})}function De(e){return Object(r.a)({url:"/greenguard/manager/user/profile/unbind",method:"post",data:e})}function We(e){return Object(r.a)({url:"/greenguard/manager/index/querySoftByBundleId",method:"post",data:e})}function Pe(e){return Object(r.a)({url:"/greenguard/manager/miniprogram/list",method:"post",data:e})}function Ie(e){return Object(r.a)({url:"/greenguard/manager/miniprogram/add",method:"post",data:e})}function Ke(e){return Object(r.a)({url:"/greenguard/manager/miniprogram/edit",method:"post",data:e})}function Ge(e){return Object(r.a)({url:"/greenguard/manager/miniprogram/del",method:"post",data:e})}function Ye(e){return Object(r.a)({url:"/greenguard/manager/user/list",method:"post",data:e})}function He(e){return Object(r.a)({url:"/greenguard/manager/user/saveOrUpdate",method:"post",data:e})}function et(e){return Object(r.a)({url:"/greenguard/manager/user/updateState",method:"post",data:e})}function tt(e){return Object(r.a)({url:"/greenguard/manager/user/password/reset",method:"post",data:e})}function nt(e){return Object(r.a)({url:"/greenguard/manager/sysRole/list",method:"post",data:e})}function rt(e){return Object(r.a)({url:"/greenguard/manager/sysRole/list/all",method:"post",data:e})}function at(e){return Object(r.a)({url:"/ns-permission/roles/greenguard/manager/sysRole/info",method:"post",data:e})}function ut(e){return Object(r.a)({url:"/ns-permission/roles/greenguard/manager/sysRole/saveOrUpdate",method:"post",data:e})}function it(e){return Object(r.a)({url:"/greenguard/manager/device/addMobileLog",method:"post",data:e})}function ot(e){return Object(r.a)({url:"/greenguard/manager/device/findMobileLog",method:"post",data:e})}function st(e){return Object(r.a)({url:"/greenguard/manager/device/findAliLog",method:"post",data:e})}},VKFn:function(e,t,n){n("bBy9"),n("FlQf"),e.exports=n("ldVq")},Xl2j:function(e,t,n){"use strict";var r=n("RNf3");n.n(r).a},Zkmf:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return g});var r,a,u=n("14Xm"),i=n.n(u),o=n("D3Ub"),s=n.n(o),c=n("+bwJ"),l=n("vDqi"),d=n.n(l),m=n("z0WU"),f=(r=s()(i.a.mark(function e(t){var n,r,a,u,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(t);case 2:return n=e.sent,r={hash:n},a={headers:{"Content-Type":"application/json"},baseURL:"/gelei-guard-bms/api"},u="/file/data/secondpass",o=Object(c.a)(r),s=JSON.parse(o),e.next=10,d.a.post(u,s,a);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),g=(a=s()(i.a.mark(function e(t){var n,r,a,u,o,s,l,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.next=4,Object(m.a)(t);case 4:for(f in r=e.sent,a={hash:r},u={headers:{"Content-Type":"multipart/form-data"},baseURL:"/gelei-guard-bms/api"},o=Object(c.a)(a),s="/file/data/upload",l=JSON.parse(o))n.append(f,l[f]);return e.next=13,d.a.post(s,n,u);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},fXsU:function(e,t,n){var r=n("5K7Z"),a=n("fNZA");e.exports=n("WEpk").getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},"k/8l":function(e,t,n){e.exports={default:n("VKFn"),__esModule:!0}},ldVq:function(e,t,n){var r=n("QMMT"),a=n("UWiX")("iterator"),u=n("SBuE");e.exports=n("WEpk").isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||u.hasOwnProperty(r(t))}},sk9p:function(e,t,n){"use strict";t.__esModule=!0;var r=u(n("k/8l")),a=u(n("FyfS"));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,u=!1,i=void 0;try{for(var o,s=(0,a.default)(e);!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){u=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(u)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},vieT:function(e,t,n){"use strict";n.r(t);var r=n("QbLZ"),a=n.n(r),u=n("GQeE"),i=n.n(u),o=n("Zkmf"),s=n("S583"),c=n("z0WU"),l=n("YP4+"),d=n("L2JU"),m=n("sk9p"),f=n.n(m),g=n("4d7F"),p=n.n(g);var _={name:"CreateOrEditBusinessCooperation",props:{condition:{type:Object,default:function(){return{}}},dialog_visible:{type:Boolean,default:!1}},data:function(){return{title:"",loading:!1,virtual_channel_url:"",form:{channel_no:"",channel_name:"",channel_desc:"",channel_contacts:"",contact_info:"",channel_id:"",file_list:[{status:"success",uid:(new Date).getTime(),url:l.f,name:""}],user_id_list:[],rule:"",plan_id:"",channel_url:""},pic_file_list:[],plan_list:[],channels:[],rules:{channel_name:[{required:!0,message:"请输入广告名称",trigger:"blur"}],channel_url:[{required:!0,message:"请输入图片上传",trigger:"blur"}],channel_desc:[{required:!0,message:"渠道描述为必填项",trigger:"blur"}],file_list:[{required:!0,message:"渠道背影图为必传项",trigger:"blur"}],user_id_list:[{required:!1,type:"array",min:1,message:"渠道归属人不能为空",trigger:"blur"}],rule:[{required:!0,message:"规则介绍为必填项",trigger:"blur"}],plan_id:[{required:!0,message:"会员套餐不能为空",trigger:"blur"}]}}},computed:a()({},Object(d.b)(["name","is_agent"]),{is_created:function(){return 0===i()(this.condition).length}}),mounted:function(){this.init_dialog()},methods:{handle_close:function(){this.cancel()},reset_form:function(){var e=this.plan_list.find(function(e){return"669a95cd71f74e7b9dfd0356a3c84002"===e.value}),t=[{status:"success",uid:(new Date).getTime(),url:l.f,name:""}],n=void 0;n=this.is_agent?[this.name]:[],this.form={channel_no:"",channel_name:"",channel_desc:"",channel_contacts:"",contact_info:"",channel_id:"",user_id_list:n,file_list:t,rule:"",plan_id:e?e.plan_id:"",channel_url:""}},fetch_business_cooperation_details:function(){var e=this,t={channel_id:this.condition.channel_id};Object(s.W)(t).then(function(t){0===t.status?(e.form=t.data,e.form.file_list=[{name:"",status:"success",uid:(new Date).getTime(),url:e.form.img_url}],e.title=t.data.channel_name,e.virtual_channel_url=e.build_channel_url(t.data.channel_id)):e.$message.error(t.msg)})},init_dialog:function(){var e=this;this.loading=!0;(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new p.a(function(t){var n=[Object(s.Q)(e),Object(s.kb)()];p.a.all(n).then(function(e){var n=f()(e,2),r=n[0],a=n[1],u=void 0;u=0===r.status?r.data:[];var i=void 0;i=0===a.status?a.data:[],t({member_plans_list:u,associated_user_list:i})})})})({is_listing:"1",plan_type:"02"}).then(function(t){var n=t.member_plans_list,r=t.associated_user_list;e.plan_list=n.map(function(e){return{plan_id:e.plan_id,value:e.plan_id,label:e.plan_name}}),e.channels=r.map(function(t){var n=e.is_agent&&t.user_id===e.name;return{label:t.real_name+"("+t.role_name+")",value:t.user_id,disabled:n}}),e.is_created?(e.title="创建商务合作注册页",e.reset_form()):e.fetch_business_cooperation_details()}).finally(function(){e.loading=!1})},build_channel_url:function(e){return Object(c.i)()+"/gelei-guard-h5/share/invited_friends.html#/business-cooperation?cid="+e},push_picture_to_cloud:function(e){var t=this;if(this.form.file_list.length>=1)this.$message.warning("只能上传一张图片");else{var n=e.file;Object(o.a)(n).then(function(r){var a=r.data;if(-1!==[1,-2,"-2"].indexOf(a.status))Object(o.b)(n).then(function(n){var r=n.data;if(0===r.status){var a=r.data.url,u={name:e.file.name,url:a};t.form.file_list.push(u)}else t.$message.error(r.message)});else if(-1===a.status)t.$message.error(a.message);else if(0===a.status){var u=a.data.url,i={name:e.file.name,url:u};t.form.file_list.push(i),t.$message.success("上传成功")}else t.$message.error(a.message)})}},remove_picture:function(){this.form.file_list=[]},cancel:function(){this.$emit("receive",!1),this.reset_form()},save:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.is_created,e.modified_business_cooperation())})},get_params:function(){var e={channel_name:this.form.channel_name,channel_desc:this.form.channel_desc,channel_contacts:this.form.channel_contacts,contact_info:this.form.contact_info,img_url:this.form.file_list[0].url,rule:this.form.rule,user_id_list:this.form.user_id_list,plan_id:this.form.plan_id};return this.is_created||(e.channel_no=this.form.channel_no,e.channel_id=this.form.channel_id,e.channel_url=this.virtual_channel_url),e},modified_business_cooperation:function(){var e=this,t=this.get_params();Object(s.A)(t).then(function(t){0===t.status?(e.$message.success(t.message),e.$emit("receive"),e.reset_form()):e.$message.error(t.message)})},change_channel:function(e){this.is_agent&&-1===e.indexOf(this.name)&&this.form.user_id_list.unshift(this.name)}}},b=(n("9QCZ"),n("KHd+")),h=Object(b.a)(_,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-card"},[n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dialog_pannel",attrs:{title:e.title,"before-close":e.handle_close,visible:e.dialog_visible,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",top:"5vh",width:"50%"},on:{"update:visible":function(t){e.dialog_visible=t}}},[n("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-suffix":":","label-width":"120px"}},[n("el-form-item",{attrs:{label:"合作渠道名称",prop:"channel_name"}},[n("el-input",{attrs:{maxlength:"30",size:"mini"},model:{value:e.form.channel_name,callback:function(t){e.$set(e.form,"channel_name",t)},expression:"form.channel_name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"渠道描述",prop:"channel_desc"}},[n("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.form.channel_desc,callback:function(t){e.$set(e.form,"channel_desc",t)},expression:"form.channel_desc"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"渠道联系人",prop:"channel_contacts"}},[n("el-input",{attrs:{maxlength:"30",size:"mini"},model:{value:e.form.channel_contacts,callback:function(t){e.$set(e.form,"channel_contacts",t)},expression:"form.channel_contacts"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"渠道联系方式",prop:"contact_info"}},[n("el-input",{attrs:{maxlength:"30",size:"mini"},model:{value:e.form.contact_info,callback:function(t){e.$set(e.form,"contact_info",t)},expression:"form.contact_info"}})],1),e._v(" "),e.is_created?e._e():n("el-form-item",{attrs:{label:"渠道编号"}},[n("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.form.channel_no,callback:function(t){e.$set(e.form,"channel_no",t)},expression:"form.channel_no"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"图片上传",prop:"file_list"}},[n("el-upload",{staticClass:"upload-demo",attrs:{"http-request":e.push_picture_to_cloud,"on-remove":e.remove_picture,multiple:!1,limit:1,"file-list":e.form.file_list,action:"","list-type":"picture"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v(" "),n("div",{staticClass:"upload-file-to-server"},[e._v("备注: 图片尺寸为347*682，格式为PNG, JPG。")])],1),e._v(" "),n("el-form-item",{attrs:{label:"规则介绍",prop:"rule"}},[n("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.form.rule,callback:function(t){e.$set(e.form,"rule",t)},expression:"form.rule"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"会员套餐",prop:"plan_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.is_agent,filterable:"",size:"mini",placeholder:"选择会员套餐"},model:{value:e.form.plan_id,callback:function(t){e.$set(e.form,"plan_id",t)},expression:"form.plan_id"}},e._l(e.plan_list,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"渠道归属人",prop:"user_id_list"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"mini",multiple:"",placeholder:"选择渠道归属人"},on:{change:e.change_channel},model:{value:e.form.user_id_list,callback:function(t){e.$set(e.form,"user_id_list",t)},expression:"form.user_id_list"}},e._l(e.channels,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,disabled:e.disabled,value:e.value}})}),1)],1),e._v(" "),e.is_created?e._e():n("el-form-item",{attrs:{label:"渠道创建人"}},[n("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.form.founder_real_name,callback:function(t){e.$set(e.form,"founder_real_name",t)},expression:"form.founder_real_name"}})],1),e._v(" "),e.is_created?e._e():n("el-form-item",{attrs:{label:"渠道链接"}},[n("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.virtual_channel_url,callback:function(t){e.virtual_channel_url=t},expression:"virtual_channel_url"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),n("gl-button",{attrs:{pid:"10043",size:"mini",type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)],1)],1)},[],!1,null,"6dc33f86",null).exports,v=n("X4fA"),j={name:"BusinessCooperation",components:{createOrEditBusinessCooperation:h},data:function(){return{loading:!1,business_cooperation_list:[],page:1,page_size:Object(v.a)(),page_sizes:l.V,total:0,show_pannel:!1,query_set:{key_word:"",associated_user:""},table_data:[],channel_owner_list:[],current_uid:"",condition:{},recharge_dialog_visible:!1,member_dialog_visible:!1,download_loading:!1}},mounted:function(){this.init()},methods:{input_pure_number:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.replace(/[^\d]/g,"");this.$nextTick(function(){n?t.query_set.begin_valid_days=r:t.query_set.end_valid_days=r})},init:function(){this.fetch_business_cooperation(),this.fetch_business_cooperation_channel_owner_list()},table_size_change:function(e){this.page_size=e,Object(v.d)(e),this.fetch_business_cooperation()},change_current:function(e){this.page=e,this.fetch_business_cooperation()},get_config:function(){return{page_no:this.page,page_num:this.page_size}},get_params:function(){var e=this.get_config();return this.query_set.key_word&&(e.key_word=""+this.query_set.key_word),this.query_set.associated_user&&(e.associated_user=this.query_set.associated_user),e},search:function(){this.page=1,this.fetch_business_cooperation()},create_business_cooperation:function(){this.condition={},this.show_pannel=!0},edit_business_cooperation:function(e){this.condition={channel_id:e.channel_id},this.show_pannel=!0},pannel_callback:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.search(),this.show_pannel=!1},build_channel_url:function(e){return Object(c.i)()+"/gelei-guard-h5/share/invited_friends.html#/business-cooperation?cid="+e},fetch_business_cooperation:function(){var e=this;this.loading=!0;var t=this.get_params();Object(s.X)(t).then(function(t){0===t.status?(e.table_data=t.data.map(function(t,n){var r=t.sys_user_list?t.sys_user_list.map(function(e){return e.real_name+"("+e.role_name+")"}).join("、"):"",u=Object(c.b)(t.create_time,l.p),i=(e.page-1)*e.page_size+n+1,o=e.build_channel_url(t.channel_id);return a()({},t,{row_id:i,channel_owner:r,virtual_channel_url:o,create_time_label:u})}),e.total=t.total_count):e.$message.error(t.msg)}).finally(function(){e.loading=!1})},fetch_business_cooperation_channel_owner_list:function(){var e=this;Object(s.kb)().then(function(t){0===t.status?e.channel_owner_list=t.data.map(function(e,t){return{label:e.real_name,value:e.user_id}}):e.$message.error(t.msg)})}}},O=(n("Xl2j"),Object(b.a)(j,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gelei-content"},[n("div",{staticClass:"content-body"},[n("div",{staticClass:"search-area"},[n("el-row",{staticClass:"row-bg",attrs:{gutter:10}},[n("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:5,xl:4}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-row",[n("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("渠道名称:")]),e._v(" "),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{size:"mini",clearable:"",placeholder:"请输入渠道名称"},on:{change:e.search},model:{value:e.query_set.key_word,callback:function(t){e.$set(e.query_set,"key_word",t)},expression:"query_set.key_word"}})],1)],1)],1)]),e._v(" "),n("el-col",{staticClass:"col-bg",attrs:{xs:12,sm:8,md:6,lg:5,xl:4}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-row",[n("el-col",{staticClass:"order-number-list",attrs:{span:8}},[e._v("渠道归属人:")]),e._v(" "),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{size:"mini",clearable:"",placeholder:"请输入渠道归属人"},on:{change:e.search},model:{value:e.query_set.associated_user,callback:function(t){e.$set(e.query_set,"associated_user",t)},expression:"query_set.associated_user"}})],1)],1)],1)]),e._v(" "),n("el-col",{staticClass:"col-bg layout-right",attrs:{xs:24,sm:8,md:12,lg:14,xl:16}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-row",[n("gl-button",{staticClass:"download details-tab",attrs:{loading:e.download_loading,pid:"20064",size:"mini",type:"success"},on:{click:e.create_business_cooperation}},[e._v("创建页面\n              ")])],1)],1)])],1)],1),e._v(" "),n("div",{staticClass:"between-search-area-and-table-display"}),e._v(" "),n("div",{staticClass:"table-content table-block"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.table_data,size:"mini",stripe:""}},[n("el-table-column",{attrs:{align:"center",label:"序号",prop:"row_id",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"渠道名称",prop:"channel_name",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("a",{staticClass:"channel-link",attrs:{href:t.row.virtual_channel_url,target:"_blank"}},[e._v(e._s(t.row.channel_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"UV",prop:"uv"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"PV",prop:"pv"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"下载量",prop:"download_count"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"注册量",prop:"register_count"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"会员套餐",prop:"plan_name"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"渠道归属人",prop:"channel_owner"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"渠道创建人",prop:"founder_real_name"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"160",label:"创建时间",prop:"create_time_label"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"120",prop:"control"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("gl-button",{staticStyle:{"text-decoration":"underline"},attrs:{pid:"20090",size:"mini",type:"text"},on:{click:function(n){return e.edit_business_cooperation(t.row)}}},[e._v("编辑\n            ")])]}}])})],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.page,"page-size":e.page_size,"page-sizes":e.page_sizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.change_current,"size-change":e.table_size_change}})],1)]),e._v(" "),e.show_pannel?n("createOrEditBusinessCooperation",{attrs:{dialog_visible:e.show_pannel,condition:e.condition,channels:e.channel_owner_list},on:{receive:e.pannel_callback}}):e._e()],1)},[],!1,null,"158dfed4",null));t.default=O.exports}}]);